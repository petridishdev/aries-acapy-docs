"use strict";(self.webpackChunkaries_cloud_agent_python_documentation=self.webpackChunkaries_cloud_agent_python_documentation||[]).push([[1793],{3905:(e,r,t)=>{t.d(r,{Zo:()=>u,kt:()=>m});var a=t(7294);function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function l(e,r){if(null==e)return{};var t,a,n=function(e,r){if(null==e)return{};var t,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var i=a.createContext({}),c=function(e){var r=a.useContext(i),t=r;return e&&(t="function"==typeof e?e(r):s(s({},r),e)),t},u=function(e){var r=c(e.components);return a.createElement(i.Provider,{value:r},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var r=e.children;return a.createElement(a.Fragment,{},r)}},h=a.forwardRef((function(e,r){var t=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(t),h=n,m=d["".concat(i,".").concat(h)]||d[h]||p[h]||o;return t?a.createElement(m,s(s({ref:r},u),{},{components:t})):a.createElement(m,s({ref:r},u))}));function m(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var o=t.length,s=new Array(o);s[0]=h;var l={};for(var i in r)hasOwnProperty.call(r,i)&&(l[i]=r[i]);l.originalType=e,l[d]="string"==typeof e?e:n,s[1]=l;for(var c=2;c<o;c++)s[c]=t[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}h.displayName="MDXCreateElement"},5192:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>i,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var a=t(7462),n=(t(7294),t(3905));const o={},s="Endorser Demo",l={unversionedId:"demo/Endorser",id:"demo/Endorser",title:"Endorser Demo",description:"There are two ways to run the alice/faber demo with endorser support enabled.",source:"@site/docs/demo/Endorser.md",sourceDirName:"demo",slug:"/demo/Endorser",permalink:"/aries-acapy-docs/demo/Endorser",draft:!1,editUrl:"https://github.com/hyperledger/aries-acapy-docs/tree/main/docs/docusaurus/docs/demo/Endorser.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Aries OpenAPI Demo",permalink:"/aries-acapy-docs/demo/AriesOpenAPIDemo"},next:{title:"Integration Tests for Aca-py using Behave",permalink:"/aries-acapy-docs/demo/INTEGRATION-TESTS"}},i={},c=[{value:"Run Faber as an Author, with a dedicated Endorser agent",id:"run-faber-as-an-author-with-a-dedicated-endorser-agent",level:2},{value:"Run Alice as an Author and Faber as an Endorser",id:"run-alice-as-an-author-and-faber-as-an-endorser",level:2}],u={toc:c},d="wrapper";function p(e){let{components:r,...t}=e;return(0,n.kt)(d,(0,a.Z)({},u,t,{components:r,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"endorser-demo"},"Endorser Demo"),(0,n.kt)("p",null,"There are two ways to run the alice/faber demo with endorser support enabled."),(0,n.kt)("h2",{id:"run-faber-as-an-author-with-a-dedicated-endorser-agent"},"Run Faber as an Author, with a dedicated Endorser agent"),(0,n.kt)("p",null,"This approach runs Faber as an un-privileged agent, and starts a dedicated Endorser sub-process to endorse Faber's transactions."),(0,n.kt)("p",null,"Start a VON Network and a Tails server."),(0,n.kt)("p",null,"Start up Faber as Author (note the tails file size override, to allow testing of the revocation registry roll-over):"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"TAILS_FILE_COUNT=5 ./run_demo faber --endorser-role author --revocation\n")),(0,n.kt)("p",null,"Start up Alcie as normal:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"./run_demo alice\n")),(0,n.kt)("p",null,"You can run all of Faber's functions as normal - if you watch the console you will see that all ledger operations go through the endorser workflow."),(0,n.kt)("p",null,"If you issue more than 5 credentials, you will see Faber creating a new revocation registry (encluding endorser operations)."),(0,n.kt)("h2",{id:"run-alice-as-an-author-and-faber-as-an-endorser"},"Run Alice as an Author and Faber as an Endorser"),(0,n.kt)("p",null,"This approach sets up the endorser roles to allow manual testing using the agents' swagger pages:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Faber runs as an Endorser (all of Faber's functions - issue credential, request proof, etc.) run normally, since Faber has ledger write access"),(0,n.kt)("li",{parentName:"ul"},"Alice starts up with a DID aith Author privileges (no ledger write access) and Faber is setup as Alice's Endorser")),(0,n.kt)("p",null,"Start a VON Network and a Tails server."),(0,n.kt)("p",null,"Start up Faber as Endorser:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"TAILS_FILE_COUNT=5 ./run_demo faber --endorser-role endorser --revocation\n")),(0,n.kt)("p",null,"Start up Alice as Author:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"TAILS_FILE_COUNT=5 ./run_demo alice --endorser-role author --revocation\n")),(0,n.kt)("p",null,"Copy the invitation from Faber to Alice to complete the connection."),(0,n.kt)("p",null,'Then in the Alice shell, select option "D" and copy Faber\'s DID (it is the DID displayed on faber agent startup).'),(0,n.kt)("p",null,"This starts up the ACA-Py agents with the endorser role set (via the new command-line args) and sets up the connection between the 2 agents with appropriate configuration."),(0,n.kt)("p",null,"Then, in the ",(0,n.kt)("a",{parentName:"p",href:"http://localhost:8031"},"Alice swagger page")," you can create a schema and cred def, and all the endorser steps will happen automatically.  You don't need to specify a connection id or explicitly request endorsement (ACA-Py does it all automatically based on the startup args)."),(0,n.kt)("p",null,"If you check the endorser transaction records in either ",(0,n.kt)("a",{parentName:"p",href:"http://localhost:8031"},"Alice")," or ",(0,n.kt)("a",{parentName:"p",href:"http://localhost:8021"},"Faber")," you can see that the endorser protocol executes automatically and the appropriate endorsements were endorsed before writing the transactions to the ledger."))}p.isMDXComponent=!0}}]);