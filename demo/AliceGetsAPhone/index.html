<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-demo/AliceGetsAPhone">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Alice Gets a Mobile Agent | Aries Cloud Agent Python (ACA-Py)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hyperledger.github.io/aries-acapy-docs/demo/AliceGetsAPhone"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Alice Gets a Mobile Agent | Aries Cloud Agent Python (ACA-Py)"><meta data-rh="true" name="description" content="In this demo, we&#x27;ll again use our familiar Faber ACA-Py agent to issue credentials to Alice, but this time Alice will use a mobile wallet. To do this we need to run the Faber agent on a publicly accessible port, and Alice will need a compatible mobile wallet. We&#x27;ll provide pointers to where you can get them."><meta data-rh="true" property="og:description" content="In this demo, we&#x27;ll again use our familiar Faber ACA-Py agent to issue credentials to Alice, but this time Alice will use a mobile wallet. To do this we need to run the Faber agent on a publicly accessible port, and Alice will need a compatible mobile wallet. We&#x27;ll provide pointers to where you can get them."><link data-rh="true" rel="icon" href="/aries-acapy-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hyperledger.github.io/aries-acapy-docs/demo/AliceGetsAPhone"><link data-rh="true" rel="alternate" href="https://hyperledger.github.io/aries-acapy-docs/demo/AliceGetsAPhone" hreflang="en"><link data-rh="true" rel="alternate" href="https://hyperledger.github.io/aries-acapy-docs/demo/AliceGetsAPhone" hreflang="x-default"><link rel="stylesheet" href="/aries-acapy-docs/assets/css/styles.4ae0b40d.css">
<link rel="preload" href="/aries-acapy-docs/assets/js/runtime~main.f368ecf0.js" as="script">
<link rel="preload" href="/aries-acapy-docs/assets/js/main.0257e31f.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/aries-acapy-docs/"><div class="navbar__logo"><img src="/aries-acapy-docs/img/aries-logo.png" alt="ACA-Py" class="themedImage_ToTc themedImage--light_HNdA"><img src="/aries-acapy-docs/img/aries-logo.png" alt="ACA-Py" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Aries Cloud Agent Python</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/docs/">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/code/">Code</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/demo/">Demo</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hyperledger/aries-cloudagent-python" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aries-acapy-docs/admin/CHANGELOG">Admin</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/code/">Code</a><button aria-label="Toggle the collapsible sidebar category &#x27;Code&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/aries-acapy-docs/demo/">Aries Cloud Agent Python (ACA-Py) Demos</a><button aria-label="Toggle the collapsible sidebar category &#x27;Aries Cloud Agent Python (ACA-Py) Demos&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/demo/AcmeDemoWorkshop">Acme Controller Workshop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/demo/AgentTracing">Using Tracing in ACA-PY</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/aries-acapy-docs/demo/AliceGetsAPhone">Alice Gets a Mobile Agent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/demo/AliceWantsAJsonCredential">How to Issue JSON-LD Credentials using Aca-py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/demo/AriesOpenAPIDemo">Aries OpenAPI Demo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/demo/Endorser">Endorser Demo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/demo/INTEGRATION-TESTS">Integration Tests for Aca-py using Behave</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/developer/">Becoming an Indy/Aries Developer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Becoming an Indy/Aries Developer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/docs/">Hyperledger Aries Cloud Agent - Python</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hyperledger Aries Cloud Agent - Python&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/aries-acapy-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/aries-acapy-docs/demo/"><span itemprop="name">Aries Cloud Agent Python (ACA-Py) Demos</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Alice Gets a Mobile Agent</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Alice Gets a Mobile Agent! </h1><p>In this demo, we&#x27;ll again use our familiar Faber ACA-Py agent to issue credentials to Alice, but this time Alice will use a mobile wallet. To do this we need to run the Faber agent on a publicly accessible port, and Alice will need a compatible mobile wallet. We&#x27;ll provide pointers to where you can get them.</p><p>This demo also introduces revocation of credentials.</p><h1>Contents </h1><ul><li><a href="#getting-started">Getting Started</a><ul><li><a href="#get-a-mobile-agent">Get a mobile agent</a></li><li><a href="#running-locally-in-docker">Running Locally in Docker</a></li><li><a href="#running-in-play-with-docker">Running in Play With Docker</a></li><li><a href="#run-an-instance-of-indy-tails-server">Run an instance of indy-tails-server</a></li></ul></li><li><a href="#run-faber-with-extra-parameters">Run <code>faber</code> With Extra Parameters</a></li><li><a href="#accept-the-invitation">Accept the Invitation</a></li><li><a href="#issue-a-credential">Issue a Credential</a><ul><li><a href="#accept-the-credential">Accept the Credential</a></li></ul></li><li><a href="#issue-a-presentation-request">Issue a Presentation Request</a></li><li><a href="#present-the-proof">Present the Proof</a></li><li><a href="#review-the-proof">Review the Proof</a></li><li><a href="#revoke-the-credential-and-send-another-proof-request">Revoke the Credential and Send Another Proof Request</a></li><li><a href="#send-a-connectionless-proof-request">Send a Connectionless Proof Request</a></li><li><a href="#conclusion">Conclusion</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting Started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started">​</a></h2><p>This demo can be run on your local machine or on Play with Docker (PWD), and will demonstrate credential exchange and proof exchange as well as revocation with a mobile agent. Both approaches (running locally and on PWD) will be described, for the most part the commands are the same, but there are a couple of different parameters you need to provide when starting up.</p><p>If you are not familiar with how revocation is currently implemented in Hyperledger Indy, <a href="https://github.com/hyperledger/indy-hipe/tree/master/text/0011-cred-revocation" target="_blank" rel="noopener noreferrer">this article</a> provides a good background on the technique. A challenge with revocation as it is currently implemented in Hyperledger Indy is the need for the prover (the agent creating the proof) to download tails files associated with the credentials it holds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-a-mobile-agent">Get a mobile agent<a href="#get-a-mobile-agent" class="hash-link" aria-label="Direct link to Get a mobile agent" title="Direct link to Get a mobile agent">​</a></h3><p>Of course for this, you need to have a mobile agent. To find, install and setup a compatible mobile agent, follow the instructions <a href="https://github.com/bcgov/identity-kit-poc/blob/master/docs/GettingApp.md" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-locally-in-docker">Running Locally in Docker<a href="#running-locally-in-docker" class="hash-link" aria-label="Direct link to Running Locally in Docker" title="Direct link to Running Locally in Docker">​</a></h3><p>Open a new bash shell and in a project directory run the following:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/hyperledger/aries-cloudagent-python.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> aries-cloudagent-python/demo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We&#x27;ll come back to this in a minute, when we start the <code>faber</code> agent!</p><p>There are a couple of extra steps you need to take to prepare to run the Faber agent locally:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="install-ngrok-and-jq">Install ngrok and jq<a href="#install-ngrok-and-jq" class="hash-link" aria-label="Direct link to Install ngrok and jq" title="Direct link to Install ngrok and jq">​</a></h4><p><a href="https://ngrok.com/" target="_blank" rel="noopener noreferrer">ngrok</a> is used to expose public endpoints for services running locally on your computer.</p><p><a href="https://github.com/stedolan/jq" target="_blank" rel="noopener noreferrer">jq</a> is a json parser that is used to automatically detect the endpoints exposed by ngrok.</p><p>You can install ngrok from <a href="https://ngrok.com/" target="_blank" rel="noopener noreferrer">here</a></p><p>You can download jq releases <a href="https://github.com/stedolan/jq/releases" target="_blank" rel="noopener noreferrer">here</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="expose-services-publicly-using-ngrok">Expose services publicly using ngrok<a href="#expose-services-publicly-using-ngrok" class="hash-link" aria-label="Direct link to Expose services publicly using ngrok" title="Direct link to Expose services publicly using ngrok">​</a></h4><p>Note that this is <em>only required when running docker on your local machine</em>. When you run on PWD a public endpoint for your agent is exposed automatically.</p><p>Since the mobile agent will need some way to communicate with the agent running on your local machine in docker, we will need to create a publicly accesible url for some services on your machine. The easiest way to do this is with <a href="https://ngrok.com/" target="_blank" rel="noopener noreferrer">ngrok</a>. Once ngrok is installed, create a tunnel to your local machine:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ngrok http </span><span class="token number" style="color:#36acaa">8020</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This service is used for your local aca-py agent - it is the endpoint that is advertised for other Aries agents to connect to.</p><p>You will see something like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Forwarding                    http://abc123.ngrok.io -&gt; http://localhost:8020</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Forwarding                    https://abc123.ngrok.io -&gt; http://localhost:8020</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This creates a public url for ports 8020 on your local machine.</p><p>Note that an ngrok process is created automatically for your tails server.</p><p>Keep this process running as we&#x27;ll come back to it in a moment.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-in-play-with-docker">Running in Play With Docker<a href="#running-in-play-with-docker" class="hash-link" aria-label="Direct link to Running in Play With Docker" title="Direct link to Running in Play With Docker">​</a></h3><p>To run the necessary terminal sessions in your browser, go to the Docker playground service <a href="https://labs.play-with-docker.com/" target="_blank" rel="noopener noreferrer">Play with Docker</a>. Don&#x27;t know about Play with Docker? Check <a href="https://github.com/cloudcompass/ToIPLabs/blob/master/docs/LFS173x/RunningLabs.md#running-on-play-with-docker" target="_blank" rel="noopener noreferrer">this out</a> to learn more.</p><p>Open a new bash shell and in a project directory run the following:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/hyperledger/aries-cloudagent-python.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> aries-cloudagent-python/demo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We&#x27;ll come back to this in a minute, when we start the <code>faber</code> agent!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-an-instance-of-indy-tails-server">Run an instance of indy-tails-server<a href="#run-an-instance-of-indy-tails-server" class="hash-link" aria-label="Direct link to Run an instance of indy-tails-server" title="Direct link to Run an instance of indy-tails-server">​</a></h3><p>For revocation to function, we need another component running that is used to store what are called tails files.</p><p>If you are not running with revocation enabled you can skip this step.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-locally-in-a-bash-shell">Running locally in a bash shell?<a href="#running-locally-in-a-bash-shell" class="hash-link" aria-label="Direct link to Running locally in a bash shell?" title="Direct link to Running locally in a bash shell?">​</a></h4><p>Open a new bash shell, and in a project directory, run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/bcgov/indy-tails-server.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> indy-tails-server/docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./manage build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./manage start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will run the required components for the tails server to function and make a tails server available on port 6543.</p><p>This will also automatically start an ngrok server that will expose a public url for your tails server - this is required to support mobile agents. The docker output will look something like this:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ngrok-tails-server_1  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">t</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2020</span><span class="token plain">-05-13T22:51:14+0000 </span><span class="token assign-left variable" style="color:#36acaa">lvl</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:#36acaa">msg</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started tunnel&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">obj</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tunnels </span><span class="token assign-left variable" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;command_line (http)&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">addr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">http://tails-server:6543 </span><span class="token assign-left variable" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">http://c5789aa0.ngrok.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ngrok-tails-server_1  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">t</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2020</span><span class="token plain">-05-13T22:51:14+0000 </span><span class="token assign-left variable" style="color:#36acaa">lvl</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:#36acaa">msg</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started tunnel&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">obj</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tunnels </span><span class="token assign-left variable" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">command_line </span><span class="token assign-left variable" style="color:#36acaa">addr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">http://tails-server:6543 </span><span class="token assign-left variable" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">https://c5789aa0.ngrok.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note the server name in the <code>url=https://c5789aa0.ngrok.io</code> parameter (<code>https://c5789aa0.ngrok.io</code>) - this is the external url for your tails server. Make sure you use the <code>https</code> url!</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-in-play-with-docker-1">Running in Play with Docker?<a href="#running-in-play-with-docker-1" class="hash-link" aria-label="Direct link to Running in Play with Docker?" title="Direct link to Running in Play with Docker?">​</a></h4><p>Run the same steps on <em>PWD</em> as you would run locally (see above). Open a new shell (click on &quot;ADD NEW INSTANCE&quot;) to run the tails server.</p><p>Note that with <em>Play with Docker</em> it can be challenging to capture the information you need from the log file as it scrolls by, you can try leaving off the <code>--events</code> option when you run the Faber agent to reduce the quantity of information logged to the screen.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-faber-with-extra-parameters">Run <code>faber</code> With Extra Parameters<a href="#run-faber-with-extra-parameters" class="hash-link" aria-label="Direct link to run-faber-with-extra-parameters" title="Direct link to run-faber-with-extra-parameters">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-locally-in-a-bash-shell-1">Running locally in a bash shell?<a href="#running-locally-in-a-bash-shell-1" class="hash-link" aria-label="Direct link to Running locally in a bash shell?" title="Direct link to Running locally in a bash shell?">​</a></h4><p>If you are running in a <em>local bash shell</em>, navigate to <a href="/aries-acapy-docs/demo">The demo directory</a> and run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">TAILS_NETWORK</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">docker_tails-server </span><span class="token assign-left variable" style="color:#36acaa">LEDGER_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">http://test.bcovrin.vonx.io ./run_demo faber --aip </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> --revocation --events</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>(Note that we have to start faber with <code>--aip 10</code> for compatibility with mobile clients.)</p><p>The <code>TAILS_NETWORK</code> parameter lets the demo script know how to connect to the tails server (which should be running in a separate shell on the same machine).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-in-play-with-docker-2">Running in Play with Docker?<a href="#running-in-play-with-docker-2" class="hash-link" aria-label="Direct link to Running in Play with Docker?" title="Direct link to Running in Play with Docker?">​</a></h4><p>If you are running in <em>Play with Docker</em>, navigate to <a href="/aries-acapy-docs/demo">The demo directory</a> and run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">PUBLIC_TAILS_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">https://c4f7fbb85911.ngrok.io </span><span class="token assign-left variable" style="color:#36acaa">LEDGER_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">http://test.bcovrin.vonx.io ./run_demo faber --aip </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> --revocation --events</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>PUBLIC_TAILS_URL</code> parameter lets the demo script know how to connect to the tails server. This can be running in another PWD session, or even on your local machine - the ngrok endpoint is public and will map to the correct location.</p><p>Use the ngrok url for the tails server that you noted earlier.</p><p>*<!-- -->Note that you <em>must</em> use the <code>https</code> url for the tails server endpoint.</p><p>*<!-- -->Note - you may want to leave off the <code>--events</code> option when you run the Faber agent, if you are finding you are getting too much logging output.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="waiting-for-the-faber-agent-to-start-">Waiting for the Faber agent to start ...<a href="#waiting-for-the-faber-agent-to-start-" class="hash-link" aria-label="Direct link to Waiting for the Faber agent to start ..." title="Direct link to Waiting for the Faber agent to start ...">​</a></h4><p>The <code>Preparing agent image...</code> step on the first run takes a bit of time, so while we wait, let&#x27;s look at the details of the commands. Running Faber is similar to the instructions in the <a href="/aries-acapy-docs/demo/AriesOpenAPIDemo">Aries OpenAPI Demo</a> &quot;Play with Docker&quot; section, except:</p><ul><li>We are using the BCovrin Test network because that is a network that the mobile agents can be configured to use.</li><li>We are running in &quot;auto&quot; mode, so we will make no manual acknowledgements.</li><li>The revocation related changes:<ul><li>The <code>TAILS_NETWORK</code> parameter tells the <code>./run_demo</code> script how to connect to the tails server and determine the public ngrok endpoint.</li><li>The <code>PUBLIC_TAILS_URL</code> environment variable is the address of your tails server (must be <code>https</code>).</li><li>The <code>--revocation</code> parameter to the <code>./run-demo</code> script activates the ACA-Py revocation issuance.</li></ul></li></ul><p>As part of its startup process, the agent will publish a revocation registry to the ledger.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to view screenshot of the revocation registry on the ledger</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/revocation-2-ledger.png" alt="Ledger" class="img_ev3q"></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="accept-the-invitation">Accept the Invitation<a href="#accept-the-invitation" class="hash-link" aria-label="Direct link to Accept the Invitation" title="Direct link to Accept the Invitation">​</a></h2><p>When the Faber agent starts up it automatically creates an invitation and generates a QR code on the screen. On your mobile app, select &quot;SCAN CODE&quot; (or equivalent) and point your camera at the generated QR code. The mobile agent should automatically capture the code and ask you to confirm the connection. Confirm it.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to view screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/S-1-connect-1.jpg" alt="Accept Invitation" class="img_ev3q"></div></div></details><p>The mobile agent will give you feedback on the connection process, something like &quot;A connection was added to your wallet&quot;.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to view screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/S-1-connect-2.jpg" alt="Add Connection to Wallet" class="img_ev3q"></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to view screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/S-1-connect-3.jpg" alt="Add Connection to Wallet" class="img_ev3q"></div></div></details><p>Switch your browser back to Play with Docker. You should see that the connection has been established, and there is a prompt for what actions you want to take, e.g. &quot;Issue Credential&quot;, &quot;Send Proof Request&quot; and so on.</p><p>Tip: If your screen is too small to display the QR code (this can happen in Play With Docker because the shell is only given a small portion of the browser) you can copy the invitation url to a site like <a href="https://www.the-qrcode-generator.com/" target="_blank" rel="noopener noreferrer">https://www.the-qrcode-generator.com/</a> to convert the invitation url into a QR code that you can scan. Make sure you select the <code>URL</code> option, and copy the <code>invitation_url</code>, which will look something like:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">https://abfde260.ngrok.io?c_i</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">eyJAdHlwZSI6ICJkaWQ6c292OkJ6Q2JzTlloTXJqSGlxWkRUVUFTSGc7c3BlYy9jb25uZWN0aW9ucy8xLjAvaW52aXRhdGlvbiIsICJAaWQiOiAiZjI2ZjA2YTItNWU1Mi00YTA5LWEwMDctOTNkODBiZTYyNGJlIiwgInJlY2lwaWVudEtleXMiOiBbIjlQRFE2alNXMWZwZkM5UllRWGhCc3ZBaVJrQmVKRlVhVmI0QnRQSFdWbTFXIl0sICJsYWJlbCI6ICJGYWJlci5BZ2VudCIsICJzZXJ2aWNlRW5kcG9pbnQiOiAiaHR0cHM6Ly9hYmZkZTI2MC5uZ3Jvay5pbyJ9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or this:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://ip10-0-121-4-bquqo816b480a4bfn3kg-8020.direct.play-with-docker.com?c_i</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">eyJAdHlwZSI6ICJkaWQ6c292OkJ6Q2JzTlloTXJqSGlxWkRUVUFTSGc7c3BlYy9jb25uZWN0aW9ucy8xLjAvaW52aXRhdGlvbiIsICJAaWQiOiAiZWI2MTI4NDUtYmU1OC00YTNiLTk2MGUtZmE3NDUzMGEwNzkyIiwgInJlY2lwaWVudEtleXMiOiBbIkFacEdoMlpIOTJVNnRFRTlmYk13Z3BqQkp3TEUzRFJIY1dCbmg4Y2FqdzNiIl0sICJzZXJ2aWNlRW5kcG9pbnQiOiAiaHR0cDovL2lwMTAtMC0xMjEtNC1icXVxbzgxNmI0ODBhNGJmbjNrZy04MDIwLmRpcmVjdC5wbGF5LXdpdGgtdm9uLnZvbnguaW8iLCAibGFiZWwiOiAiRmFiZXIuQWdlbnQifQ</span><span class="token operator" style="color:#393A34">==</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that this will use the ngrok endpoint if you are running locally, or your PWD endpoint if you are running on PWD.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="issue-a-credential">Issue a Credential<a href="#issue-a-credential" class="hash-link" aria-label="Direct link to Issue a Credential" title="Direct link to Issue a Credential">​</a></h2><p>We will use the Faber console to issue a credential. This could be done using the Swagger API as we have done in the connection process. We&#x27;ll leave that as an exercise to the user.</p><p>In the Faber console, select option <code>1</code> to send a credential to the mobile agent.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to view screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/S-3-credential-0.png" alt="Issue Credential" class="img_ev3q"></div></div></details><p>The Faber agent outputs details to the console; e.g.,</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Faber      | Credential: state = credential-issued, cred_ex_id = ba3089d6-92da-4cb7-9062-7f24066b2a2a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Faber      | Revocation registry ID: CMqNjZ8e59jDuBYcquce4D:4:CMqNjZ8e59jDuBYcquce4D:3:CL:50:faber.agent.degree_schema:CL_ACCUM:4f4fb2e4-3a59-45b1-8921-578d005a7ff6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Faber      | Credential revocation ID: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Faber      | Credential: state = done, cred_ex_id = ba3089d6-92da-4cb7-9062-7f24066b2a2a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The revocation registry id and credential revocation id only appear if revocation is active. If you are doing revocation, you to need the <code>Revocation registry id</code> later, so we recommend that you copy it it now and paste it into a text file or someplace that you can access later. If you don&#x27;t write it down, you can get the Id from the Admin API using the <strong><code>GET /revocation/active-registry/{cred_def_id}</code></strong> endpoint, and passing in the credential definition Id (which you can get from the <strong><code>GET /credential-definitions/created</code></strong> endpoint).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="accept-the-credential">Accept the Credential<a href="#accept-the-credential" class="hash-link" aria-label="Direct link to Accept the Credential" title="Direct link to Accept the Credential">​</a></h3><p>The credential offer should automatically show up in the mobile agent. Accept the offered credential following the instructions provided by the mobile agent. That will look something like this:</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to view screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/S-3-credential-1.jpg" alt="Credential Offer" class="img_ev3q"></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to view screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/S-3-credential-2.jpg" alt="Credential Details" class="img_ev3q"></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to view screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/S-3-credential-3.jpg" alt="Credential Acceptance" class="img_ev3q"></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="issue-a-presentation-request">Issue a Presentation Request<a href="#issue-a-presentation-request" class="hash-link" aria-label="Direct link to Issue a Presentation Request" title="Direct link to Issue a Presentation Request">​</a></h2><p>We will use the Faber console to ask mobile agent for a proof. This could be done using the Swagger API, but we&#x27;ll leave that as an exercise to the user.</p><p>In the Faber console, select option <code>2</code> to send a proof request to the mobile agent.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to view screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/S-4-proof-0.png" alt="Request Proof" class="img_ev3q"></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="present-the-proof">Present the Proof<a href="#present-the-proof" class="hash-link" aria-label="Direct link to Present the Proof" title="Direct link to Present the Proof">​</a></h2><p>The presentation (proof) request should automatically show up in the mobile agent. Follow the instructions provided by the mobile agent to prepare and send the proof back to Faber. That will look something like this:</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to view screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/S-4-proof-1.jpg" alt="Proof Request Notice" class="img_ev3q"></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to view screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/S-4-proof-2.jpg" alt="Proof Request Details" class="img_ev3q"></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to view screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/S-4-proof-3.jpg" alt="Proof Presentation" class="img_ev3q"></div></div></details><p>If the mobile agent is able to successfully prepare and send the proof, you can go back to the Play with Docker terminal to see the status of the proof.</p><p>The process should &quot;just work&quot; for the non-revocation use case. If you are using revocation, your results may vary. As of writing this, we get failures on the wallet side with some mobile wallets, and on the Faber side with others (an error in the Indy SDK). As the results improve, we&#x27;ll update this. Please let us know through GitHub issues if you have any problems running this.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="review-the-proof">Review the Proof<a href="#review-the-proof" class="hash-link" aria-label="Direct link to Review the Proof" title="Direct link to Review the Proof">​</a></h2><p>In the Faber console window, the proof should be received as validated.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to view screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/S-4-proof-4.png" alt="Proof Validation" class="img_ev3q"></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="revoke-the-credential-and-send-another-proof-request">Revoke the Credential and Send Another Proof Request<a href="#revoke-the-credential-and-send-another-proof-request" class="hash-link" aria-label="Direct link to Revoke the Credential and Send Another Proof Request" title="Direct link to Revoke the Credential and Send Another Proof Request">​</a></h2><p>If you have enabled revocation, you can try revoking the credential and publishing its pending revoked status (<code>faber</code> options <code>5</code> and <code>6</code>). For the revocation step, You will need the revocation registry identifier and the credential revocation identifier (which is 1 for the first credential you issued), as the Faber agent logged them to the console at credential issue.</p><p>Once that is done, try sending another proof request and see what happens! Experiment with immediate and pending publication. Note that immediate publication also publishes any pending revocations on its revocation registry.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to view screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/revocation-3-console.png" alt="Revocation" class="img_ev3q"></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="send-a-connectionless-proof-request">Send a Connectionless Proof Request<a href="#send-a-connectionless-proof-request" class="hash-link" aria-label="Direct link to Send a Connectionless Proof Request" title="Direct link to Send a Connectionless Proof Request">​</a></h2><p>A connectionless proof request works the same way as a regular proof request, however it does not require a connection to be established between the Verifier and Holder/Prover.</p><p>This is supported in the Faber demo, however note that it will only work when running Faber on the Docker playground service <a href="https://labs.play-with-docker.com/" target="_blank" rel="noopener noreferrer">Play with Docker</a>. (This is because both the Faber agent <em>and</em> controller both need to be exposed to the mobile agent.)</p><p>If you have gone through the above steps, you can delete the Faber connection in your mobile agent (however <em>do not</em> delete the credential that Faber issued to you).</p><p>Then in the faber demo, select option <code>2a</code> - Faber will display a QR code which you can scan with your mobile agent. You will see the same proof request displayed in your mobile agent, which you can respond to.</p><p>Behind the scenes, the Faber controller delivers the proof request information (linked from the url encoded in the QR code) directly to your mobile agent, without establishing and agent-to-agent connection first. If you are interested in the underlying mechanics, you can review the <code>faber.py</code> code in the repository.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2><p>That’s the Faber-Mobile Alice demo. Feel free to play with the Swagger API and experiment further and figure out what an instance of a controller has to do to make things work.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hyperledger/aries-acapy-docs/tree/main/docs/docusaurus/docs/demo/AliceGetsAPhone.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/aries-acapy-docs/demo/AgentTracing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Using Tracing in ACA-PY</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/aries-acapy-docs/demo/AliceWantsAJsonCredential"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How to Issue JSON-LD Credentials using Aca-py</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting Started</a><ul><li><a href="#get-a-mobile-agent" class="table-of-contents__link toc-highlight">Get a mobile agent</a></li><li><a href="#running-locally-in-docker" class="table-of-contents__link toc-highlight">Running Locally in Docker</a></li><li><a href="#running-in-play-with-docker" class="table-of-contents__link toc-highlight">Running in Play With Docker</a></li><li><a href="#run-an-instance-of-indy-tails-server" class="table-of-contents__link toc-highlight">Run an instance of indy-tails-server</a></li><li><a href="#run-faber-with-extra-parameters" class="table-of-contents__link toc-highlight">Run <code>faber</code> With Extra Parameters</a></li></ul></li><li><a href="#accept-the-invitation" class="table-of-contents__link toc-highlight">Accept the Invitation</a></li><li><a href="#issue-a-credential" class="table-of-contents__link toc-highlight">Issue a Credential</a><ul><li><a href="#accept-the-credential" class="table-of-contents__link toc-highlight">Accept the Credential</a></li></ul></li><li><a href="#issue-a-presentation-request" class="table-of-contents__link toc-highlight">Issue a Presentation Request</a></li><li><a href="#present-the-proof" class="table-of-contents__link toc-highlight">Present the Proof</a></li><li><a href="#review-the-proof" class="table-of-contents__link toc-highlight">Review the Proof</a></li><li><a href="#revoke-the-credential-and-send-another-proof-request" class="table-of-contents__link toc-highlight">Revoke the Credential and Send Another Proof Request</a></li><li><a href="#send-a-connectionless-proof-request" class="table-of-contents__link toc-highlight">Send a Connectionless Proof Request</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/aries-acapy-docs/">ACA-Py</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/hyperledger/aries-cloudagent-python" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/aries-acapy-docs/assets/js/runtime~main.f368ecf0.js"></script>
<script src="/aries-acapy-docs/assets/js/main.0257e31f.js"></script>
</body>
</html>