<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-demo/AriesOpenAPIDemo">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Aries OpenAPI Demo | Aries Cloud Agent Python (ACA-Py)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hyperledger.github.io/aries-acapy-docs/demo/AriesOpenAPIDemo"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Aries OpenAPI Demo | Aries Cloud Agent Python (ACA-Py)"><meta data-rh="true" name="description" content="What better way to learn about controllers than by actually being one yourself! In this demo, that’s just what happens&amp;mdash;you are the controller. You have access to the full set of API endpoints exposed by an ACA-Py instance, and you will see the events coming from ACA-Py as they happen. Using that information, you&#x27;ll help Alice&#x27;s and Faber&#x27;s agents connect, Faber&#x27;s agent issue an education credential to Alice, and then ask Alice to prove she possesses the credential. Who knows why Faber needs to get the proof, but it lets us show off more protocols."><meta data-rh="true" property="og:description" content="What better way to learn about controllers than by actually being one yourself! In this demo, that’s just what happens&amp;mdash;you are the controller. You have access to the full set of API endpoints exposed by an ACA-Py instance, and you will see the events coming from ACA-Py as they happen. Using that information, you&#x27;ll help Alice&#x27;s and Faber&#x27;s agents connect, Faber&#x27;s agent issue an education credential to Alice, and then ask Alice to prove she possesses the credential. Who knows why Faber needs to get the proof, but it lets us show off more protocols."><link data-rh="true" rel="icon" href="/aries-acapy-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hyperledger.github.io/aries-acapy-docs/demo/AriesOpenAPIDemo"><link data-rh="true" rel="alternate" href="https://hyperledger.github.io/aries-acapy-docs/demo/AriesOpenAPIDemo" hreflang="en"><link data-rh="true" rel="alternate" href="https://hyperledger.github.io/aries-acapy-docs/demo/AriesOpenAPIDemo" hreflang="x-default"><link rel="stylesheet" href="/aries-acapy-docs/assets/css/styles.4ae0b40d.css">
<link rel="preload" href="/aries-acapy-docs/assets/js/runtime~main.55efbebf.js" as="script">
<link rel="preload" href="/aries-acapy-docs/assets/js/main.f211ac65.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/aries-acapy-docs/"><div class="navbar__logo"><img src="/aries-acapy-docs/img/aries-logo.png" alt="ACA-Py" class="themedImage_ToTc themedImage--light_HNdA"><img src="/aries-acapy-docs/img/aries-logo.png" alt="ACA-Py" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Aries Cloud Agent Python</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/docs/">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/code/">Code</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/demo/">Demo</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hyperledger/aries-acapy-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aries-acapy-docs/admin/CHANGELOG">Admin</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/code/">Code</a><button aria-label="Toggle the collapsible sidebar category &#x27;Code&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/aries-acapy-docs/demo/">Aries Cloud Agent Python (ACA-Py) Demos</a><button aria-label="Toggle the collapsible sidebar category &#x27;Aries Cloud Agent Python (ACA-Py) Demos&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/demo/AcmeDemoWorkshop">Acme Controller Workshop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/demo/AgentTracing">Using Tracing in ACA-PY</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/demo/AliceGetsAPhone">Alice Gets a Mobile Agent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/demo/AliceWantsAJsonCredential">How to Issue JSON-LD Credentials using Aca-py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/aries-acapy-docs/demo/AriesOpenAPIDemo">Aries OpenAPI Demo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/demo/Endorser">Endorser Demo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/demo/INTEGRATION-TESTS">Integration Tests for Aca-py using Behave</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/developer/">Becoming an Indy/Aries Developer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Becoming an Indy/Aries Developer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/docs/">Hyperledger Aries Cloud Agent - Python</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hyperledger Aries Cloud Agent - Python&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/aries-acapy-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/aries-acapy-docs/demo/"><span itemprop="name">Aries Cloud Agent Python (ACA-Py) Demos</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Aries OpenAPI Demo</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Aries OpenAPI Demo </h1><p>What better way to learn about controllers than by actually being one yourself! In this demo, that’s just what happens<!-- -->—<!-- -->you are the controller. You have access to the full set of API endpoints exposed by an ACA-Py instance, and you will see the events coming from ACA-Py as they happen. Using that information, you&#x27;ll help Alice&#x27;s and Faber&#x27;s agents connect, Faber&#x27;s agent issue an education credential to Alice, and then ask Alice to prove she possesses the credential. Who knows why Faber needs to get the proof, but it lets us show off more protocols.</p><h1>Contents </h1><ul><li><a href="#getting-started">Getting Started</a></li><li><a href="#running-in-a-browser">Running in a Browser</a><ul><li><a href="#start-the-faber-agent">Start the Faber Agent</a></li><li><a href="#start-the-alice-agent">Start the Alice Agent</a></li></ul></li><li><a href="#running-in-docker">Running in Docker</a><ul><li><a href="#start-the-faber-agent-1">Start the Faber Agent</a></li><li><a href="#start-the-alice-agent-1">Start the Alice Agent</a></li><li><a href="#restarting-the-docker-containers">Restarting the Docker Containers</a></li></ul></li><li><a href="#using-the-openapiswagger-user-interface">Using the OpenAPI/Swagger User Interface</a></li><li><a href="#establishing-a-connection">Establishing a Connection</a><ul><li><a href="#use-the-faber-agent-to-create-an-invitation">Use the Faber Agent to Create an Invitation</a></li><li><a href="#copy-the-invitation-created-by-the-faber-agent">Copy the Invitation created by the Faber Agent</a></li><li><a href="#use-the-alice-agent-to-receive-fabers-invitation">Use the Alice Agent to Receive Faber&#x27;s Invitation</a></li><li><a href="#tell-alices-agent-to-accept-the-invitation">Tell Alice&#x27;s Agent to <em>Accept</em> the Invitation</a></li><li><a href="#the-faber-agent-gets-the-request">The Faber Agent Gets the Request</a></li><li><a href="#the-faber-agent-completes-the-connection">The Faber Agent Completes the Connection</a></li><li><a href="#review-the-connection-status-in-alices-agent">Review the Connection Status in Alice&#x27;s Agent</a></li><li><a href="#review-the-connection-status-in-fabers-agent">Review the Connection Status in Faber&#x27;s Agent</a></li></ul></li><li><a href="#basic-messaging-between-agents">Basic Messaging Between Agents</a><ul><li><a href="#sending-a-message-from-alice-to-faber">Sending a message from Alice to Faber</a></li><li><a href="#receiving-a-basic-message-faber">Receiving a Basic Message (Faber)</a></li><li><a href="#alices-agent-verifies-that-faber-has-received-the-message">Alice&#x27;s Agent Verifies that Faber has Received the Message</a></li></ul></li><li><a href="#preparing-to-issue-a-credential">Preparing to Issue a Credential</a><ul><li><a href="#confirming-your-schema-and-credential-definition">Confirming your Schema and Credential Definition</a></li><li><a href="#notes">Notes</a></li></ul></li><li><a href="#issuing-a-credential">Issuing a Credential</a><ul><li><a href="#faber---preparing-to-issue-a-credential">Faber - Preparing to Issue a Credential</a></li><li><a href="#faber---issuing-the-credential">Faber - Issuing the Credential</a></li><li><a href="#alice-receives-credential">Alice Receives Credential</a></li><li><a href="#alice-stores-credential-in-her-wallet">Alice Stores Credential in her Wallet</a></li><li><a href="#faber-receives-acknowledgment-that-the-credential-was-received">Faber Receives Acknowledgment that the Credential was Received</a></li><li><a href="#issue-credential-notes">Issue Credential Notes</a></li><li><a href="#bonus-points">Bonus Points</a></li></ul></li><li><a href="#requestingpresenting-a-proof">Requesting/Presenting a Proof</a><ul><li><a href="#faber-sends-a-proof-request">Faber sends a Proof Request</a></li><li><a href="#alice---responding-to-the-proof-request">Alice - Responding to the Proof Request</a></li><li><a href="#faber---verifying-the-proof">Faber - Verifying the Proof</a></li><li><a href="#present-proof-notes">Present Proof Notes</a></li><li><a href="#bonus-points-1">Bonus Points</a></li></ul></li><li><a href="#conclusion">Conclusion</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting Started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started">​</a></h2><p>We will get started by opening three browser tabs that will be used throughout the lab. Two will be Swagger UIs for the Faber and Alice agent and one for the public ledger (showing the Hyperledger Indy ledger). As well, we&#x27;ll keep the terminal sessions where we started the demos handy, as we&#x27;ll be grabbing information from them as well.</p><p>Let&#x27;s start with the ledger browser. For this demo, we&#x27;re going to use an open public ledger operated by the BC Government&#x27;s VON Team. In your first browser tab, go to: <a href="http://dev.greenlight.bcovrin.vonx.io" target="_blank" rel="noopener noreferrer">http://dev.greenlight.bcovrin.vonx.io</a>. This will be called the &quot;ledger tab&quot; in the instructions below.</p><p>For the rest of the set up, you can choose to run the terminal sessions in your browser (no local resources needed), or you can run it in Docker on your local system. Your choice, each is covered in the next two sections.</p><blockquote><p>Note: In the following, when we start the agents we use several special demo settings. The command we use is this: <code>LEDGER_URL=http://dev.greenlight.bcovrin.vonx.io ./run_demo faber --events --no-auto --bg</code>. In that:</p><ul><li>The <code>LEDGER_URL</code> environment variable informs the agent what ledger to use.</li><li>The <code>--events</code> option indicates that we want the controller to display the webhook events from ACA-Py in the log displayed on the terminal.</li><li>The <code>--no-auto</code> option indicates that we don&#x27;t want the ACA-Py agent to automatically handle some events such as connecting. We want the controller (you!) to handle each step of the protocol.</li><li>The <code>--bg</code> option indicates that the docker container will run in the background, so accidentally hitting Ctrl-C won&#x27;t stop the process.</li></ul></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-in-a-browser">Running in a Browser<a href="#running-in-a-browser" class="hash-link" aria-label="Direct link to Running in a Browser" title="Direct link to Running in a Browser">​</a></h2><p>To run the necessary terminal sessions in your browser, go to the Docker playground service <a href="https://labs.play-with-docker.com/" target="_blank" rel="noopener noreferrer">Play with Docker</a>. Don&#x27;t know about Play with Docker? Check <a href="https://github.com/cloudcompass/ToIPLabs/blob/master/docs/LFS173x/RunningLabs.md#running-on-play-with-docker" target="_blank" rel="noopener noreferrer">this out</a> to learn more.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-the-faber-agent">Start the Faber Agent<a href="#start-the-faber-agent" class="hash-link" aria-label="Direct link to Start the Faber Agent" title="Direct link to Start the Faber Agent">​</a></h3><p>In a browser, go to the <a href="https://labs.play-with-docker.com/" target="_blank" rel="noopener noreferrer">Play with Docker</a> home page, Login (if necessary) and click &quot;Start.&quot; On the next screen, click (in the left menu) &quot;+Add a new instance.&quot; That will start up a terminal in your browser. Run the following commands to start the Faber agent.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/hyperledger/aries-cloudagent-python</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> aries-cloudagent-python/demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">LEDGER_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">http://dev.greenlight.bcovrin.vonx.io ./run_demo faber --events --no-auto --bg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you are back at the command prompt, we&#x27;ll use docker&#x27;s logging capability to see what&#x27;s being written to the terminal:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> logs -f faber</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once the Faber agent has started up (with the invite displayed), click the link near the top of the screen <code>8021</code>. That will start an instance of the OpenAPI/Swagger user interface connected to the Faber instance. Note that the URL on the OpenAPI/Swagger instance is: <code>http://ip....8021.direct...</code>.</p><p><strong>Remember that the OpenAPI/Swagger browser tab with an address containing 8021 is the Faber agent.</strong></p><blockquote><p>NOTE: Hit &quot;Ctrl-C&quot; at any time to get back to the command line. When you are done with the command line, you can return to seeing the logs from the Faber agent by running <code>docker logs -f faber</code></p></blockquote><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot!</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/Faber-Agent.png" alt="Swagger Page for Faber Agent" class="img_ev3q"></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-the-alice-agent">Start the Alice Agent<a href="#start-the-alice-agent" class="hash-link" aria-label="Direct link to Start the Alice Agent" title="Direct link to Start the Alice Agent">​</a></h3><p>Now to start Alice&#x27;s agent. Click the &quot;+Add a new instance&quot; button again to open another terminal session. Run the following commands to start Alice&#x27;s agent:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/hyperledger/aries-cloudagent-python</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> aries-cloudagent-python/demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">LEDGER_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">http://dev.greenlight.bcovrin.vonx.io ./run_demo alice --events --no-auto --bg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you are back at the command prompt, we&#x27;ll use docker&#x27;s logging capability to see what&#x27;s being written to the terminal:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> logs -f alice</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can ignore a message like <code>WARNING: your terminal doesn&#x27;t support cursor position requests (CPR).</code></p><p>Once the Alice agent has started up (with the <code>invite:</code> prompt displayed), click the link near the top of the screen <code>8031</code>. That will start an instance of the OpenAPI/Swagger User Interface connected to the Alice instance. Note that the URL on the OpenAPI/Swagger instance is: <code>http://ip....8031.direct...</code>.</p><blockquote><p>NOTE: Hit &quot;Ctrl-C&quot; to get back to the command line. When you are done with the command line, you can return to seeing the logs from the Faber agent by running <code>docker logs -f faber</code></p></blockquote><p><strong>Remember that the OpenAPI/Swagger browser tab with an address containing 8031 is Alice&#x27;s agent.</strong></p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot!</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/Alice-Agent.png" alt="Swagger Page for Alice Agent" class="img_ev3q"></div></div></details><p>You are ready to go. Skip down to the <a href="#using-the-openapiswagger-user-interface">Using the OpenAPI/Swagger User Interface</a> section.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-in-docker">Running in Docker<a href="#running-in-docker" class="hash-link" aria-label="Direct link to Running in Docker" title="Direct link to Running in Docker">​</a></h2><p>To run the demo on your local system, you must have git, a running Docker installation, and terminal windows running bash. Need more information about getting set up? Click <a href="https://github.com/cloudcompass/ToIPLabs/blob/master/docs/LFS173x/RunningLabs.md#running-on-docker-locally" target="_blank" rel="noopener noreferrer">here</a> to learn more.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-the-faber-agent-1">Start the Faber Agent<a href="#start-the-faber-agent-1" class="hash-link" aria-label="Direct link to Start the Faber Agent" title="Direct link to Start the Faber Agent">​</a></h3><p>To begin running the demo in Docker, open up two terminal windows, one each for Faber’s and Alice’s agent.</p><p>In the first terminal window, clone the ACA-Py repo, change into the demo folder and start the Faber agent:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/hyperledger/aries-cloudagent-python</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> aries-cloudagent-python/demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">LEDGER_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">http://dev.greenlight.bcovrin.vonx.io ./run_demo faber --events --no-auto --bg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you are back at the command prompt, we&#x27;ll use docker&#x27;s logging capability to see what&#x27;s being written to the terminal:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> logs -f faber</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If all goes well, the agent will show a message indicating it is running. Use the second browser tab to navigate to <a href="http://localhost:8021" target="_blank" rel="noopener noreferrer">http://localhost:8021</a>. You should see an OpenAPI/Swagger user interface with a (long-ish) list of API endpoints. These are the endpoints exposed by the Faber agent.</p><blockquote><p>NOTE: Hit &quot;Ctrl-C&quot; to get back to the command line. When you are done with the command line, you can return to seeing the logs from the Faber agent by running <code>docker logs -f faber</code></p></blockquote><p><strong>Remember that the OpenAPI/Swagger browser tab with an address containing 8021 is the Faber agent.</strong></p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot!</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/Faber-Agent-Local.png" alt="Swagger Page for Faber Agent" class="img_ev3q"></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-the-alice-agent-1">Start the Alice Agent<a href="#start-the-alice-agent-1" class="hash-link" aria-label="Direct link to Start the Alice Agent" title="Direct link to Start the Alice Agent">​</a></h3><p>To start Alice&#x27;s agent, open up a second terminal window and in it, change to the same <code>demo</code> directory as where Faber&#x27;s agent was started above. Once there, start Alice&#x27;s agent:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">LEDGER_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">http://dev.greenlight.bcovrin.vonx.io ./run_demo alice --events --no-auto --bg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you are back at the command prompt, we&#x27;ll use docker&#x27;s logging capability to see what&#x27;s being written to the terminal:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> logs -f alice</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can ignore a message like <code>WARNING: your terminal doesn&#x27;t support cursor position requests (CPR)</code> that may appear.</p><p>If all goes well, the agent will show a message indicating it is running. Open a third browser tab and navigate to <a href="http://localhost:8031" target="_blank" rel="noopener noreferrer">http://localhost:8031</a>. Again, you should see the OpenAPI/Swagger user interface with a list of API endpoints, this time the endpoints for Alice’s agent.</p><blockquote><p>NOTE: Hit &quot;Ctrl-C&quot; to get back to the command line. When you are done with the command line, you can return to seeing the logs from the Alice agent by running <code>docker logs -f alice</code></p></blockquote><p><strong>Remember that the OpenAPI/Swagger browser tab with an address containing 8031 is Alice&#x27;s agent.</strong></p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot!</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/Alice-Agent-Local.png" alt="Swagger Page for Alice Agent" class="img_ev3q"></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="restarting-the-docker-containers">Restarting the Docker Containers<a href="#restarting-the-docker-containers" class="hash-link" aria-label="Direct link to Restarting the Docker Containers" title="Direct link to Restarting the Docker Containers">​</a></h3><p>When you complete the entire demo (<strong>not now!!</strong>), you can need to stop the two agents. To do that, get to the command line by hitting Ctrl-C and running:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> stop faber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> stop alice</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-openapiswagger-user-interface">Using the OpenAPI/Swagger User Interface<a href="#using-the-openapiswagger-user-interface" class="hash-link" aria-label="Direct link to Using the OpenAPI/Swagger User Interface" title="Direct link to Using the OpenAPI/Swagger User Interface">​</a></h2><p>Try to organize what you see on your screen to include both the Alice and Faber OpenAPI/Swagger tabs, and both (Alice and Faber) terminal sessions, all at the same time. After you execute an API call in one of the browser tabs, you will see a webhook event from the ACA-Py instance in the terminal window of the other agent. That&#x27;s a controller&#x27;s life. See an event, process it, send a response.</p><p>From time to time you will want to see what&#x27;s happening on the ledger, so keep that handy as well. As well, if you make an error with one of the commands (e.g. bad data, improperly structured JSON), you will see the errors in the terminals.</p><p>In the instructions that follow, we’ll let you know if you need to be in the Faber, Alice or Indy browser tab. We’ll leave it to you to track which is which.</p><p>Using the OpenAPI/Swagger user interface is pretty simple. In the steps below, we’ll indicate what API endpoint you need use, such as <strong><code>POST /connections/create-invitation</code></strong>. That means you must:</p><ol><li>scroll to and find that endpoint;</li><li>click on the endpoint name to expand its section of the UI;</li><li>click on the <code>Try it out</code> button;</li><li>fill in any data necessary to run the command;</li><li>click <code>Execute</code>;</li><li>check the response to see if the request worked.</li></ol><p>So, the mechanical steps are easy. It’s fourth step from the list above that can be tricky. Supplying the right data and, where JSON is involved, getting the syntax correct - braces and quotes can be a pain. When steps don’t work, start your debugging by looking at your JSON.</p><p>Enough with the preliminaries, let’s get started!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="establishing-a-connection">Establishing a Connection<a href="#establishing-a-connection" class="hash-link" aria-label="Direct link to Establishing a Connection" title="Direct link to Establishing a Connection">​</a></h2><p>We’ll start the demo by establishing a connection between the Alice and Faber agents. We’re starting there to demonstrate that you can use agents without having a ledger. We won’t be using the Indy public ledger at all for this step. Since the agents communicate using DIDComm messaging and connect by exchanging pairwise DIDs and DIDDocs based on (an early version of) the <code>did:peer</code> DID method, a public ledger is not needed.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-faber-agent-to-create-an-invitation">Use the Faber Agent to Create an Invitation<a href="#use-the-faber-agent-to-create-an-invitation" class="hash-link" aria-label="Direct link to Use the Faber Agent to Create an Invitation" title="Direct link to Use the Faber Agent to Create an Invitation">​</a></h3><p>In the Faber browser tab, navigate to the <strong><code>POST /connections/create-invitation</code></strong> endpoint. Replace the sample body with and empty production (<code>{}</code>) and execute the call. If successful, you should see a connection id, an invitation, and the invitation URL. The connection ids will be different on each run.</p><p><strong>Hint: set an Alias on the Invitation, this makes it easier to find the Connection later on</strong></p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - Create Invitation Request</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/1-Faber-Invitation-1.png" alt="Create Invitation Request" class="img_ev3q"></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - Create Invitation Response</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/1-Faber-Invitation-2.png" alt="Create Invitation Response" class="img_ev3q"></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="copy-the-invitation-created-by-the-faber-agent">Copy the Invitation created by the Faber Agent<a href="#copy-the-invitation-created-by-the-faber-agent" class="hash-link" aria-label="Direct link to Copy the Invitation created by the Faber Agent" title="Direct link to Copy the Invitation created by the Faber Agent">​</a></h3><p>Copy the entire block of the <code>invitation</code> object, from the curly brackets <code>{}</code>, excluding the trailing comma.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - Create Invitation Response</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/1-Faber-Invitation-3.png" alt="Create Invitation Response" class="img_ev3q"></div></div></details><p>Before switching over to the Alice browser tab, scroll to and execute the <strong><code>GET /connections</code></strong> endpoint to see the list of Faber&#x27;s connections. You should see a connection with a <code>connection_id</code> that is identical to the invitation you just created, and that its state is <code>invitation</code>.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - Faber Connection Status</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/1-Faber-Invitation-4.png" alt="Faber Connection Status" class="img_ev3q"></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-alice-agent-to-receive-fabers-invitation">Use the Alice Agent to Receive Faber&#x27;s Invitation<a href="#use-the-alice-agent-to-receive-fabers-invitation" class="hash-link" aria-label="Direct link to Use the Alice Agent to Receive Faber&#x27;s Invitation" title="Direct link to Use the Alice Agent to Receive Faber&#x27;s Invitation">​</a></h3><p>Switch to the Alice browser tab and get ready to execute the <strong><code>POST /connections/receive-invitation</code></strong> endpoint. Select all of the pre-populated text and replace it with the invitation object from the Faber tab. When you click <code>Execute</code> you should get back a connection response with a connection Id, an invitation key, and the state of the connection, which should be <code>invitation</code>.</p><p><strong>Hint: set an Alias on the Invitation, this makes it easier to find the Connection later on</strong></p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - Receive Invitation Request</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/2-Alice-Invitation-1.png" alt="Receive Invitation Request" class="img_ev3q"></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - Receive Invitation Response</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/2-Alice-Invitation-2.png" alt="Receive Invitation Request" class="img_ev3q"></div></div></details><blockquote><p>A key observation to make here. The &quot;copy and paste&quot; we are doing here from Faber&#x27;s agent to Alice&#x27;s agent is what is called an &quot;out of band&quot; message. Because we don&#x27;t yet have a DIDComm connection between the two agents, we have to convey the invitation in plaintext (we can&#x27;t encrypt it - no channel) using some other mechanism than DIDComm. With mobile agents, that&#x27;s where QR codes often come in. Once we have the invitation in the receivers agent, we can get back to using DIDComm.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tell-alices-agent-to-accept-the-invitation">Tell Alice&#x27;s Agent to <em>Accept</em> the Invitation<a href="#tell-alices-agent-to-accept-the-invitation" class="hash-link" aria-label="Direct link to tell-alices-agent-to-accept-the-invitation" title="Direct link to tell-alices-agent-to-accept-the-invitation">​</a></h3><p>At this point Alice has simply stored the invitation in her wallet. You can see the status using the <strong><code>GET /connections</code></strong> endpoint.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/2-Alice-Invitation-3.png" alt="Invitation Status" class="img_ev3q"></div></div></details><p>To complete a connection with Faber, she must accept the invitation and send a corresponding connection request to Faber. Find the <code>connection_id</code> in the connection response from the previous <strong><code>POST /connections/receive-invitation</code></strong> endpoint call. You may note that the same data was sent to the controller as an event from ACA-Py and is visible in the terminal. Scroll to the <strong><code>POST /connections/{conn_id}/accept-invitation</code></strong> endpoint and paste the <code>connection_id</code> in the <code>id</code> parameter field (you will have to click the <code>Try it out</code> button to see the available URL parameters). The response from clicking <code>Execute</code> should show that the connection has a state of <code>request</code>.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - Accept Invitation Request</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/2-Alice-Invitation-4.png" alt="Receive Invitation Request" class="img_ev3q"></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - Accept Invitation Response</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/2-Alice-Invitation-5.png" alt="Receive Invitation Response" class="img_ev3q"></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-faber-agent-gets-the-request">The Faber Agent Gets the Request<a href="#the-faber-agent-gets-the-request" class="hash-link" aria-label="Direct link to The Faber Agent Gets the Request" title="Direct link to The Faber Agent Gets the Request">​</a></h3><p>In the Faber terminal session, an event (a web service callback from ACA-Py to the controller) has been received about the request from Alice. Copy the <code>connection_id</code> from the event for the next step.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me the event</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/3-Faber-Connection-2.png" alt="Connection Request Event" class="img_ev3q"></div></div></details><p>Note that the connection ID held by Alice is different from the one held by Faber. That makes sense, as both independently created connection objects, each with a unique, self-generated GUID.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-faber-agent-completes-the-connection">The Faber Agent Completes the Connection<a href="#the-faber-agent-completes-the-connection" class="hash-link" aria-label="Direct link to The Faber Agent Completes the Connection" title="Direct link to The Faber Agent Completes the Connection">​</a></h3><p>To complete the connection process, Faber will respond to the connection request from Alice. Scroll to the <strong><code>POST /connections/{conn_id}/accept-request</code></strong> endpoint and paste the <code>connection_id</code> you previously copied into the <code>id</code> parameter field (you will have to click the <code>Try it out</code> button to see the available URL parameters). The response from clicking the <code>Execute</code> button should show that the connection has a state of <code>response</code>, which indicates that Faber has accepted Alice&#x27;s connection request.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - Accept Connection Request</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/3-Faber-Connection-3.png" alt="Accept Connection Request" class="img_ev3q"></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - Accept Connection Request</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/3-Faber-Connection-4.png" alt="Accept Connection Request" class="img_ev3q"></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="review-the-connection-status-in-alices-agent">Review the Connection Status in Alice&#x27;s Agent<a href="#review-the-connection-status-in-alices-agent" class="hash-link" aria-label="Direct link to Review the Connection Status in Alice&#x27;s Agent" title="Direct link to Review the Connection Status in Alice&#x27;s Agent">​</a></h3><p>Switch over to the Alice browser tab.</p><p>Scroll to and execute <strong><code>GET /connections</code></strong> to see a list of Alice&#x27;s connections, and the information tracked about each connection. You should see the one connection Alice’s agent has, that it is with the Faber agent, and that its state is <code>active</code>.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - Alice Connection Status</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/4-Alice-Connection-2.png" alt="Alice Connection Event" class="img_ev3q"></div></div></details><p>As with Faber&#x27;s side of the connection, Alice received a notification that Faber had accepted her connection request.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me the event</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/4-Alice-Connection-1.png" alt="Alice Connection Status" class="img_ev3q"></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="review-the-connection-status-in-fabers-agent">Review the Connection Status in Faber&#x27;s Agent<a href="#review-the-connection-status-in-fabers-agent" class="hash-link" aria-label="Direct link to Review the Connection Status in Faber&#x27;s Agent" title="Direct link to Review the Connection Status in Faber&#x27;s Agent">​</a></h3><p>You are connected! Switch to the Faber browser tab and run the same <strong><code>GET /connections</code></strong> endpoint to see Faber&#x27;s view of the connection. Its state is also <code>active</code>. Note the <code>connection_id</code>, you’ll need it later in the tutorial.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - Faber Connection Status</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/5-Faber-Connection-1.png" alt="Faber Connection Status" class="img_ev3q"></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-messaging-between-agents">Basic Messaging Between Agents<a href="#basic-messaging-between-agents" class="hash-link" aria-label="Direct link to Basic Messaging Between Agents" title="Direct link to Basic Messaging Between Agents">​</a></h2><p>Once you have a connection between two agents, you have a channel to exchange secure, encrypted messages. In fact these underlying encrypted messages (similar to envelopes in a postal system) enable the delivery of messages that form the higher level protocols, such as issuing Credentials and providing Proofs. So, let&#x27;s send a couple of messages that contain the simplest of context<!-- -->—<!-- -->text. For this we wil use the Basic Message protocol, <a href="https://github.com/hyperledger/aries-rfcs/tree/master/features/0095-basic-message" target="_blank" rel="noopener noreferrer">Aries RFC 0095</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sending-a-message-from-alice-to-faber">Sending a message from Alice to Faber<a href="#sending-a-message-from-alice-to-faber" class="hash-link" aria-label="Direct link to Sending a message from Alice to Faber" title="Direct link to Sending a message from Alice to Faber">​</a></h3><p>On Alice&#x27;s swagger page, scroll to the <strong><code>POST /connections/{conn_id}/send-message</code></strong> endpoint. Click on <code>Try it Out</code> and enter a message in the body provided (for example <code>{&quot;content&quot;: &quot;Hello Faber&quot;}</code>). Enter the connection id of Alice&#x27;s connection in the field provided. Then click on <code>Execute</code>.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/6-Alice-Basic-Msg.png" alt="Alice Send Message" class="img_ev3q"></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="receiving-a-basic-message-faber">Receiving a Basic Message (Faber)<a href="#receiving-a-basic-message-faber" class="hash-link" aria-label="Direct link to Receiving a Basic Message (Faber)" title="Direct link to Receiving a Basic Message (Faber)">​</a></h3><p>How does Faber know that a message was sent? If you take a look at Faber&#x27;s console window, you can see that Faber&#x27;s agent has raised an Event that the message was received:</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/7-Faber-Basic-Msg.png" alt="Faber Receive Message" class="img_ev3q"></div></div></details><p>Faber&#x27;s controller application can take whatever action is necessary to process this message. It could trigger some application code, or it might just be something the Faber application needs to display to its user (for example a reminder about some action the user needs to take).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="alices-agent-verifies-that-faber-has-received-the-message">Alice&#x27;s Agent Verifies that Faber has Received the Message<a href="#alices-agent-verifies-that-faber-has-received-the-message" class="hash-link" aria-label="Direct link to Alice&#x27;s Agent Verifies that Faber has Received the Message" title="Direct link to Alice&#x27;s Agent Verifies that Faber has Received the Message">​</a></h3><p>How does Alice get feedback that Faber has received the message? The same way - when Faber&#x27;s agent acknowledges receipt of the message, Alice&#x27;s agent raises an Event to let the Alice controller know:</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/8-Alice-Basic-Msg.png" alt="Alice Receive Message Confirmation" class="img_ev3q"></div></div></details><p>Again, Alice&#x27;s agent can take whatever action is necessary, possibly just flagging the message as having been <code>received</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="preparing-to-issue-a-credential">Preparing to Issue a Credential<a href="#preparing-to-issue-a-credential" class="hash-link" aria-label="Direct link to Preparing to Issue a Credential" title="Direct link to Preparing to Issue a Credential">​</a></h2><p>The next thing we want to do in the demo is have the Faber agent issue a credential to Alice’s agent. To this point, we have not used the Indy ledger at all. Establishing the connection and messaging has been done with pairwise DIDs based on the <code>did:peer</code> method. Verifiable credentials must be rooted in a public DID ledger to enable the presentation of proofs.</p><p>Before the Faber agent can issue a credential, it must register a DID on the Indy public ledger, publish a schema, and create a credential definition. In the “real world”, the Faber agent would do this before connecting with any other agents. And, since we are using the handy &quot;./run_demo faber&quot; (and &quot;./run_demo alice&quot;) scripts to start up our agents, the Faber version of the script has already:</p><ol><li>registered a public DID and stored it on the ledger;</li><li>created a schema and registered it on the ledger;</li><li>created a credential definition and registered it on the ledger.</li></ol><p>The schema and credential definition could also be created through this swagger interface.</p><p>We don&#x27;t cover the details of those actions in this tutorial, but there are other materials available that go through these details.</p><blockquote><p>To Do: Add a link to directions for doing this manually, and to where in the controller Python code this is done.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="confirming-your-schema-and-credential-definition">Confirming your Schema and Credential Definition<a href="#confirming-your-schema-and-credential-definition" class="hash-link" aria-label="Direct link to Confirming your Schema and Credential Definition" title="Direct link to Confirming your Schema and Credential Definition">​</a></h3><p>You can confirm the schema and credential definition were published by going back to the Indy ledger browser tab using Faber&#x27;s public DID. You may have saved that from a previous step, but if not here is an API call you can make to get that information. Using Faber&#x27;s swagger page and scroll to the <strong><code>GET /wallet/did/public</code></strong> endpoint. Click on <code>Try it Out</code> and <code>Execute</code> and you will see Faber&#x27;s public DID.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/C-1-Faber-DID-Public.png" alt="Faber Public DID" class="img_ev3q"></div></div></details><p>On the ledger browser of the <a href="http://dev.greenlight.bcovrin.vonx.io" target="_blank" rel="noopener noreferrer">BCovrin ledger</a>, click the <code>Domain</code> page, refresh, and paste the Faber public DID into the <code>Filter:</code> field:</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/C-2-Faber-Ledger-Search-0.png" alt="Search Ledger by DID" class="img_ev3q"></div></div></details><p>The ledger browser should refresh and display the four (4) transactions on the ledger related to this DID:</p><ul><li>the initial DID registration</li><li>registration of the DID endpoint (Faber is an issuer so it has a public endpoint)</li><li>the registered schema</li><li>the registered credential definition</li></ul><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me the ledger transactions</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/C-2-Faber-Ledger-Search-1.png" alt="DID Transaction" class="img_ev3q"><img loading="lazy" src="./collateral/C-2-Faber-Ledger-Search-2.png" alt="DID Endpoint Transaction" class="img_ev3q"><img loading="lazy" src="./collateral/C-2-Faber-Ledger-Search-3.png" alt="Schema Transaction" class="img_ev3q"><img loading="lazy" src="./collateral/C-2-Faber-Ledger-Search-4.png" alt="Credential Definition Transaction" class="img_ev3q"></div></div></details><p>You can also look up the Schema and Credential Definition information using Faber&#x27;s swagger page. Use the <strong><code>GET /schemas/created</code></strong> endpoint to get a list of schemas, including the one <code>schema_id</code> that the Faber agent has defined. Keep this section of the Swagger page expanded as we&#x27;ll need to copy the Id as part of starting the issue credential protocol coming next.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/C-3-Faber-Info-2.png" alt="Search Schemas" class="img_ev3q"><img loading="lazy" src="./collateral/C-3-Faber-Info-3.png" alt="Search Schemas" class="img_ev3q"></div></div></details><p>Likewise use the <strong><code>GET /credential-definitions/created</code></strong> endpoint to get the list of the one (in this case) credential definition id created by Faber. Keep this section of the Swagger page expanded as we&#x27;ll also need to copy the Id as part of starting the issue credential protocol coming next.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/C-3-Faber-Info-4.png" alt="Search Credential Definitions" class="img_ev3q"><img loading="lazy" src="./collateral/C-3-Faber-Info-5.png" alt="Search Credential Definitions" class="img_ev3q"></div></div></details><p><strong>Hint</strong>: Remember how the schema and credential definitions were created for you as Faber started up? To do it yourself, use the <strong><code>POST</code></strong> versions of these endpoints. Now you know!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="notes">Notes<a href="#notes" class="hash-link" aria-label="Direct link to Notes" title="Direct link to Notes">​</a></h3><p>The one time setup work for issuing a credential is complete<!-- -->—<!-- -->creating a DID, schema and credential definition. We can now issue 1 or 1 million credentials without having to do those steps again. Astute readers might note that we did not setup a revocation registry, so we cannot revoke the credentials we issue with that credential definition. You can’t have everything in an &quot;easy&quot; tutorial!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="issuing-a-credential">Issuing a Credential<a href="#issuing-a-credential" class="hash-link" aria-label="Direct link to Issuing a Credential" title="Direct link to Issuing a Credential">​</a></h2><p>Triggering the issuance of a credential from the Faber agent to Alice’s agent is done with another API call. In the Faber browser tab, scroll down to the <strong><code>POST /issue-credential-2.0/send</code></strong> and get ready to (but don’t yet) execute the request. Before execution, you need to update most of the data elements in the JSON. We now cover how to update all the fields.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="faber---preparing-to-issue-a-credential">Faber - Preparing to Issue a Credential<a href="#faber---preparing-to-issue-a-credential" class="hash-link" aria-label="Direct link to Faber - Preparing to Issue a Credential" title="Direct link to Faber - Preparing to Issue a Credential">​</a></h3><p>First, get the connection Id for Faber&#x27;s connection with Alice. You can copy that from the Faber terminal (the last received event includes it), or scroll up on the Faber swagger tab to the <strong><code>GET /connections</code></strong> API endpoint, execute, copy it and paste the <code>connection_id</code> value into the same field in the issue credential JSON.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Click here to see a screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/C-3-Faber-Info-1.png" alt="Connection Id" class="img_ev3q"></div></div></details><p>For the following fields, scroll on Faber&#x27;s Swagger page to the listed endpoint, execute (if necessary), copy the response value and paste as the values of the following JSON items:</p><ul><li><code>issuer_did</code> the Faber public DID (use <strong><code>GET /wallet/DID/public</code></strong>),</li><li><code>schema_id</code> the Id of the schema Faber created (use <strong><code>GET /schemas/created</code></strong>) and,</li><li><code>cred_def_id</code> the Id of the credential definition Faber created (use <strong><code>GET /credential-definitions/created</code></strong>)</li></ul><p>into the <code>filter</code> section&#x27;s <code>indy</code> subsection. Remove the <code>&quot;dif&quot;</code> subsection of the <code>filter</code> section within the JSON, and specify the remaining indy filter criteria as follows:</p><ul><li><code>schema_version</code>: set to the last segment of the <code>schema_id</code>, a three part version number that was randomly generated on startup of the Faber agent. Segments of the <code>schema_id</code> are separated by &quot;:&quot;s.</li><li><code>schema_issuer_did</code>: set to the same the value as in <code>issuer_did</code>,</li><li><code>schema_name</code>: set to the second last segment of the <code>schema_id</code>, in this case <code>degree schema</code></li></ul><p>Finally, set the remaining values as follows:</p><ul><li><code>auto_remove</code>: set to <code>true</code> (no quotes), see note below</li><li><code>comment</code>: set to any string. It&#x27;s intended to let Alice know something about the credential being offered.</li><li><code>trace</code>: set to <code>false</code> (no quotes). It&#x27;s for troubleshooting, performance profiling, and/or diagnostics.</li></ul><p>By setting <code>auto_remove</code> to true, ACA-Py will automatically remove the credential exchange record after the protocol completes. When implementing a controller, this is the likely setting to use to reduce agent storage usage, but implies if a record of the issuance of the credential is needed, the controller must save it somewhere else. For example, Faber College might extend their Student Information System, where they track all their students, to record when credentials are issued to students, and the Ids of the issued credentials.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="faber---issuing-the-credential">Faber - Issuing the Credential<a href="#faber---issuing-the-credential" class="hash-link" aria-label="Direct link to Faber - Issuing the Credential" title="Direct link to Faber - Issuing the Credential">​</a></h3><p>Finally, we need put into the JSON the data values for the <code>credential_preview</code> section of the JSON. Copy the following and paste it between the square brackets of the <code>attributes</code> item, replacing what is there. Feel free to change the attribute <code>value</code> items, but don&#x27;t change the labels or names:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;name&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;Alice Smith&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;timestamp&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;1234567890&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;date&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;2018-05-28&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;degree&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;Maths&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;birthdate_dateint&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;19640101&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>(Note that the birthdate above is used to present later on to pass an &quot;age proof&quot;.)</p><p>OK, finally, you are ready to click <code>Execute</code>. The request should work, but if it doesn’t - check your JSON! Did you get all the quotes and commas right?</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - credential offer</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/C-4-Faber-Credential-Offer-1.png" alt="Faber Submit Credential Offer" class="img_ev3q"><img loading="lazy" src="./collateral/C-4-Faber-Credential-Offer-2.png" alt="Faber Submit Credential Offer" class="img_ev3q"></div></div></details><p>To confirm the issuance worked, scroll up on the Faber Swagger page to the <code>issue-credential v2.0</code> section and execute the <strong><code>GET /issue-credential-2.0/records</code></strong> endpoint. You should see a lot of information about the exchange just initiated.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="alice-receives-credential">Alice Receives Credential<a href="#alice-receives-credential" class="hash-link" aria-label="Direct link to Alice Receives Credential" title="Direct link to Alice Receives Credential">​</a></h3><p>Let’s look at it from Alice’s side. Alice&#x27;s agent source code automatically handles credential offers by immediately responding with a credential request. Scroll back in the Alice terminal to where the credential issuance started. If you&#x27;ve followed the full script, that is just after where we used the basic message protocol to send text messages between Alice and Faber.</p><p>Alice&#x27;s agent first received a notification of a Credential Offer, to which it responded with a Credential Request. Faber received the Credential Request and responded in turn with an Issue Credential message. Scroll down through the events from ACA-Py to the controller to see the notifications of those messages. Make sure you scroll all the way to the bottom of the terminal so you can continue with the process.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - issue credential</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/C-5-Alice-Credential-Offer-1.png" alt="Issue Credential" class="img_ev3q"></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="alice-stores-credential-in-her-wallet">Alice Stores Credential in her Wallet<a href="#alice-stores-credential-in-her-wallet" class="hash-link" aria-label="Direct link to Alice Stores Credential in her Wallet" title="Direct link to Alice Stores Credential in her Wallet">​</a></h3><p>We can check (via Alice&#x27;s Swagger interface) the issue credential status by hitting the <strong><code>GET /issue-credential-2.0/records</code></strong> endpoint. Note that within the results, the <code>cred_ex_record</code> just received has a <code>state</code> of <code>credential-received</code>, but not yet <code>done</code>. Let&#x27;s address that.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - check credential exchange status</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/C-7-Alice-Store-Credential-1.png" alt="" class="img_ev3q"><img loading="lazy" src="./collateral/C-7-Alice-Store-Credential-2.png" alt="" class="img_ev3q"></div></div></details><p>First, we need the <code>cred_ex_id</code> from the API call response above, or from the event in the terminal; use the endpoint <strong><code>POST /issue-credential-2.0/records/{cred_ex_id}/store</code></strong> to tell Alice&#x27;s ACA-Py instance to store the credential in agent storage (aka the Indy Wallet). Note that in the JSON for that endpoint we can provide a credential Id to store in the wallet by setting a value in the <code>credential_id</code> string. A real controller might use the <code>cred_ex_id</code> for that, or use something else that makes sense in the agent&#x27;s business scenario (but the agent generates a random credential identifier by default).</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - store credential</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/C-7-Alice-Store-Credential-3.png" alt="" class="img_ev3q"><img loading="lazy" src="./collateral/C-7-Alice-Store-Credential-4.png" alt="" class="img_ev3q"></div></div></details><p>Now, in Alice’s swagger browser tab, find the <code>credentials</code> section and within that, execute the <strong><code>GET /credentials</code></strong> endpoint. There should be a list of credentials held by Alice, with just a single entry, the credential issued from the Faber agent. Note that the element <code>referent</code> is the value of the <code>credential_id</code> element used in other calls. <code>referent</code> is the name returned in the <code>indy-sdk</code> call to get the set of credentials for the wallet and ACA-Py code does not change it in the response.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="faber-receives-acknowledgment-that-the-credential-was-received">Faber Receives Acknowledgment that the Credential was Received<a href="#faber-receives-acknowledgment-that-the-credential-was-received" class="hash-link" aria-label="Direct link to Faber Receives Acknowledgment that the Credential was Received" title="Direct link to Faber Receives Acknowledgment that the Credential was Received">​</a></h3><p>On the Faber side, we can see by scanning back in the terminal that it receive events to notify that the credential was issued and accepted.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me Faber&#x27;s event activity</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/C-6-Faber-Credential-Request.png" alt="" class="img_ev3q"><img loading="lazy" src="./collateral/C-8-Faber-Credential-Ack-0.png" alt="" class="img_ev3q"></div></div></details><p>Note that once the credential processing completed, Faber&#x27;s agent deleted the credential exchange record from its wallet. This can be confirmed by executing the endpoint <strong><code>GET /issue-credential-2.0/records</code></strong></p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/C-8-Faber-Credential-Ack-1.png" alt="" class="img_ev3q"><img loading="lazy" src="./collateral/C-8-Faber-Credential-Ack-2.png" alt="" class="img_ev3q"></div></div></details><p>You’ve done it, issued a credential! w00t!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="issue-credential-notes">Issue Credential Notes<a href="#issue-credential-notes" class="hash-link" aria-label="Direct link to Issue Credential Notes" title="Direct link to Issue Credential Notes">​</a></h3><p>Those that know something about the Indy process for issuing a credential and the DIDComm <code>Issue Credential</code> protocol know that there multiple steps to issuing credentials, a back and forth between the issuer and the holder to (at least) offer, request and issue the credential. All of those messages happened, but the two agents took care of those details rather than bothering the controller (you, in this case) with managing the back and forth.</p><ul><li>On the Faber agent side, this is because we used the <strong><code>POST /issue-credential-2.0/send</code></strong> administrative message, which handles the back and forth for the issuer automatically. We could have used the other <code>/issue-credential-2.0/</code> endpoints to allow the controller to handle each step of the protocol.</li><li>On Alice&#x27;s agent side, this is because the handler for the <code>issue_credential_v2_0</code> event always responds to credential offers with corresponding credential requests.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bonus-points">Bonus Points<a href="#bonus-points" class="hash-link" aria-label="Direct link to Bonus Points" title="Direct link to Bonus Points">​</a></h3><p>If you would like to perform all of the issuance steps manually on the Faber agent side, use a sequence of the other <code>/issue-credential-2.0/</code> messages. Use the <strong><code>GET /issue-credential-2.0/records</code></strong> to both check the credential exchange state as you progress through the protocol and to find some of the data you’ll need in executing the sequence of requests.</p><p>The following table lists endpoints that you need to call (&quot;REST service&quot;) and callbacks that your agent will receive (&quot;callback&quot;) that your need to respond to. See the <a href="/aries-acapy-docs/AdminAPI.md">detailed API docs</a>.</p><table><thead><tr><th>Protocol Step</th><th>Faber (Issuer)</th><th>Alice (Holder)</th><th>Notes</th></tr></thead><tbody><tr><td>Send Credential Offer</td><td><strong><code>POST /issue-credential-2.0/send-offer</code></strong></td><td></td><td>REST service</td></tr><tr><td>Receive Offer</td><td></td><td>&lt;agent_cb&gt;/issue_credential_v2_0/</td><td>callback</td></tr><tr><td>Send Credential Request</td><td></td><td><strong><code>POST /issue-credential-2.0/records/{cred_ex_id}/send-request</code></strong></td><td>REST service</td></tr><tr><td>Receive Request</td><td>&lt;agent_cb&gt;/issue_credential_v2_0/</td><td></td><td>callback</td></tr><tr><td>Issue Credential</td><td><strong><code>POST /issue-credential-2.0/records/{cred_ex_id}/issue</code></strong></td><td></td><td>REST service</td></tr><tr><td>Receive Credential</td><td></td><td>&lt;agent_cb&gt;/issue_credential_v2_0/</td><td>callback</td></tr><tr><td>Store Credential</td><td></td><td><strong><code>POST /issue-credential-2.0/records/{cred_ex_id}/store</code></strong></td><td>REST service</td></tr><tr><td>Receive Acknowledgement</td><td>&lt;agent_cb&gt;/issue_credential_v2_0/</td><td></td><td>callback</td></tr><tr><td>Store Credential Id</td><td></td><td></td><td>application function</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="requestingpresenting-a-proof">Requesting/Presenting a Proof<a href="#requestingpresenting-a-proof" class="hash-link" aria-label="Direct link to Requesting/Presenting a Proof" title="Direct link to Requesting/Presenting a Proof">​</a></h2><p>Alice now has her Faber credential. Let’s have the Faber agent send a request for a presentation (a proof) using that credential. This should be pretty easy for you at this point.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="faber-sends-a-proof-request">Faber sends a Proof Request<a href="#faber-sends-a-proof-request" class="hash-link" aria-label="Direct link to Faber sends a Proof Request" title="Direct link to Faber sends a Proof Request">​</a></h3><p>From the Faber browser tab, get ready to execute the <strong><code>POST /present-proof-2.0/send-request</code></strong> endpoint. After hitting <code>Try it Now</code>, erase the data in the block labelled &quot;Edit Value Model&quot;, replacing it with the text below. Once that is done, replace in the JSON each instance of <code>cred_def_id</code> (there are four instances) and <code>connection_id</code> with the values found using the same techniques we&#x27;ve used earlier in this tutorial. Both can be found by scrolling back a little in the Faber terminal, or you can execute API endpoints we&#x27;ve already covered. You can also change the value of the <code>comment</code> item to whatever you want.</p><div class="language-jsonc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsonc codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;comment&quot;: &quot;This is a comment about the reason for the proof&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;connection_id&quot;: &quot;e469e0f3-2b4d-4b12-9ac7-293f23e8a816&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;presentation_request&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;indy&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;Proof of Education&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;version&quot;: &quot;1.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;requested_attributes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;0_name_uuid&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;name&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;restrictions&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;cred_def_id&quot;: &quot;SsX9siFWXJyCAmXnHY514N:3:CL:8:faber.agent.degree_schema&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;0_date_uuid&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;date&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;restrictions&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;cred_def_id&quot;: &quot;SsX9siFWXJyCAmXnHY514N:3:CL:8:faber.agent.degree_schema&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;0_degree_uuid&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;degree&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;restrictions&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;cred_def_id&quot;: &quot;SsX9siFWXJyCAmXnHY514N:3:CL:8:faber.agent.degree_schema&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;0_self_attested_thing_uuid&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;self_attested_thing&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;requested_predicates&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;0_age_GE_uuid&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;birthdate_dateint&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;p_type&quot;: &quot;&lt;=&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;p_value&quot;: 20030101,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;restrictions&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;cred_def_id&quot;: &quot;SsX9siFWXJyCAmXnHY514N:3:CL:8:faber.agent.degree_schema&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>(Note that the birthdate requested above is used as an &quot;age proof&quot;, the calculation is something like <code>now() - years(18)</code>, and the presented birthdate must be on or before this date. You can see the calculation in action in the <code>faber.py</code> demo code.)</p><p>Notice that the proof request is using a predicate to check if Alice is older than 18 without asking for her age. Not sure what this has to do with her education level! Click <code>Execute</code> and cross your fingers. If the request fails check your JSON!</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me a screenshot - send proof request</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/P-1-Faber-Proof-Request-1.png" alt="Send Proof Request" class="img_ev3q"><img loading="lazy" src="./collateral/P-1-Faber-Proof-Request-2.png" alt="Send Proof Request" class="img_ev3q"></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="alice---responding-to-the-proof-request">Alice - Responding to the Proof Request<a href="#alice---responding-to-the-proof-request" class="hash-link" aria-label="Direct link to Alice - Responding to the Proof Request" title="Direct link to Alice - Responding to the Proof Request">​</a></h3><p>As before, Alice receives a webhook event from her agent telling her she has received a Proof Request. In our scenario, the ACA-Py instance automatically selects a matching credential and responds with a Proof.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me Alice&#x27;s event activity</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/P-2-Alice-Proof-Request-1.png" alt="Proof Request" class="img_ev3q"><img loading="lazy" src="./collateral/P-2-Alice-Proof-Request-2.png" alt="Proof Request" class="img_ev3q"></div></div></details><p>In a real scenario, for example if Alice had a mobile agent on her smartphone, the agent would prompt Alice whether she wanted to respond or not.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="faber---verifying-the-proof">Faber - Verifying the Proof<a href="#faber---verifying-the-proof" class="hash-link" aria-label="Direct link to Faber - Verifying the Proof" title="Direct link to Faber - Verifying the Proof">​</a></h3><p>Note that in the response, the state is <code>request-sent</code>. That is because when the HTTP response was generated (immediately after sending the request), Alice&#x27;s agent had not yet responded to the request. We’ll have to do another request to verify the presentation worked. Copy the value of the <code>pres_ex_id</code> field from the event in the Faber terminal and use it in executing the <strong><code>GET /present-proof-2.0/records/{pres_ex_id}</code></strong> endpoint. That should return a result showing the <code>state</code> as <code>done</code> and <code>verified</code> as <code>true</code>. Proof positive!</p><p>You can see some of Faber&#x27;s activity below:</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Show me Faber&#x27;s event activity</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="./collateral/P-3-Faber-Proof-1.png" alt="Receive and Verify Proof" class="img_ev3q"><img loading="lazy" src="./collateral/P-3-Faber-Proof-2.png" alt="Receive and Verify Proof" class="img_ev3q"><img loading="lazy" src="./collateral/P-3-Faber-Proof-3.png" alt="Receive and Verify Proof" class="img_ev3q"></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="present-proof-notes">Present Proof Notes<a href="#present-proof-notes" class="hash-link" aria-label="Direct link to Present Proof Notes" title="Direct link to Present Proof Notes">​</a></h3><p>As with the issue credential process, the agents handled some of the presentation steps without bothering the controller. In this case, Alice&#x27;s agent processed the presentation request automatically through its handler for the <code>present_proof_v2_0</code> event, and her wallet contained exactly one credential that satisfied the presentation-request from the Faber agent. Similarly, the Faber agent&#x27;s handler for the event responds automatically and so on receipt of the presentation, it verified the presentation and updated the status accordingly.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bonus-points-1">Bonus Points<a href="#bonus-points-1" class="hash-link" aria-label="Direct link to Bonus Points" title="Direct link to Bonus Points">​</a></h3><p>If you would like to perform all of the proof request/response steps manually, you can call all of the individual <code>/present-proof-2.0</code> messages.</p><p>The following table lists endpoints that you need to call (&quot;REST service&quot;) and callbacks that your agent will receive (&quot;callback&quot;) that your need to respond to. See the <a href="/aries-acapy-docs/AdminAPI.md">detailed API docs</a>.</p><table><thead><tr><th>Protocol Step</th><th>Faber (Verifier)</th><th>Alice (Holder/Prover)</th><th>Notes</th></tr></thead><tbody><tr><td>Send Proof Request</td><td><strong><code>POST /present-proof-2.0/send-request</code></strong></td><td></td><td>REST service</td></tr><tr><td>Receive Proof Request</td><td></td><td>&lt;agent_cb&gt;/present_proof_v2_0</td><td>callback</td></tr><tr><td>Find Credentials</td><td></td><td><strong><code>GET /present-proof-2.0/records/{pres_ex_id}/credentials</code></strong></td><td>REST service</td></tr><tr><td>Select Credentials</td><td></td><td></td><td>application or user function</td></tr><tr><td>Send Proof</td><td></td><td><strong><code>POST /present-proof-2.0/records/{pres_ex_id}/send-presentation</code></strong></td><td>REST service</td></tr><tr><td>Receive Proof</td><td>&lt;agent_cb&gt;/present_proof_v2_0</td><td></td><td>callback</td></tr><tr><td>Validate Proof</td><td><strong><code>POST /present-proof-2.0/records/{pres_ex_id}/verify-presentation</code></strong></td><td></td><td>REST service</td></tr><tr><td>Save Proof</td><td></td><td></td><td>application data</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2><p>That’s the OpenAPI-based tutorial. Feel free to play with the API and learn how it works. More importantly, as you implement a controller, use the OpenAPI user interface to test out the calls you will be using as you go. The list of API calls is grouped by protocol and if you are familiar with the protocols (Aries RFCs) the API call names should be pretty obvious.</p><p>One limitation of you being the controller is that you don&#x27;t see the events from the agent that a controller program sees. For example, you, as Alice&#x27;s agent, are not notified when Faber initiates the sending of a Credential. Some of those things show up in the terminal as messages, but others you just have to know have happened based on a successful API call.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hyperledger/aries-acapy-docs/tree/main/docs/docusaurus/docs/demo/AriesOpenAPIDemo.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/aries-acapy-docs/demo/AliceWantsAJsonCredential"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">How to Issue JSON-LD Credentials using Aca-py</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/aries-acapy-docs/demo/Endorser"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Endorser Demo</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting Started</a></li><li><a href="#running-in-a-browser" class="table-of-contents__link toc-highlight">Running in a Browser</a><ul><li><a href="#start-the-faber-agent" class="table-of-contents__link toc-highlight">Start the Faber Agent</a></li><li><a href="#start-the-alice-agent" class="table-of-contents__link toc-highlight">Start the Alice Agent</a></li></ul></li><li><a href="#running-in-docker" class="table-of-contents__link toc-highlight">Running in Docker</a><ul><li><a href="#start-the-faber-agent-1" class="table-of-contents__link toc-highlight">Start the Faber Agent</a></li><li><a href="#start-the-alice-agent-1" class="table-of-contents__link toc-highlight">Start the Alice Agent</a></li><li><a href="#restarting-the-docker-containers" class="table-of-contents__link toc-highlight">Restarting the Docker Containers</a></li></ul></li><li><a href="#using-the-openapiswagger-user-interface" class="table-of-contents__link toc-highlight">Using the OpenAPI/Swagger User Interface</a></li><li><a href="#establishing-a-connection" class="table-of-contents__link toc-highlight">Establishing a Connection</a><ul><li><a href="#use-the-faber-agent-to-create-an-invitation" class="table-of-contents__link toc-highlight">Use the Faber Agent to Create an Invitation</a></li><li><a href="#copy-the-invitation-created-by-the-faber-agent" class="table-of-contents__link toc-highlight">Copy the Invitation created by the Faber Agent</a></li><li><a href="#use-the-alice-agent-to-receive-fabers-invitation" class="table-of-contents__link toc-highlight">Use the Alice Agent to Receive Faber&#39;s Invitation</a></li><li><a href="#tell-alices-agent-to-accept-the-invitation" class="table-of-contents__link toc-highlight">Tell Alice&#39;s Agent to <em>Accept</em> the Invitation</a></li><li><a href="#the-faber-agent-gets-the-request" class="table-of-contents__link toc-highlight">The Faber Agent Gets the Request</a></li><li><a href="#the-faber-agent-completes-the-connection" class="table-of-contents__link toc-highlight">The Faber Agent Completes the Connection</a></li><li><a href="#review-the-connection-status-in-alices-agent" class="table-of-contents__link toc-highlight">Review the Connection Status in Alice&#39;s Agent</a></li><li><a href="#review-the-connection-status-in-fabers-agent" class="table-of-contents__link toc-highlight">Review the Connection Status in Faber&#39;s Agent</a></li></ul></li><li><a href="#basic-messaging-between-agents" class="table-of-contents__link toc-highlight">Basic Messaging Between Agents</a><ul><li><a href="#sending-a-message-from-alice-to-faber" class="table-of-contents__link toc-highlight">Sending a message from Alice to Faber</a></li><li><a href="#receiving-a-basic-message-faber" class="table-of-contents__link toc-highlight">Receiving a Basic Message (Faber)</a></li><li><a href="#alices-agent-verifies-that-faber-has-received-the-message" class="table-of-contents__link toc-highlight">Alice&#39;s Agent Verifies that Faber has Received the Message</a></li></ul></li><li><a href="#preparing-to-issue-a-credential" class="table-of-contents__link toc-highlight">Preparing to Issue a Credential</a><ul><li><a href="#confirming-your-schema-and-credential-definition" class="table-of-contents__link toc-highlight">Confirming your Schema and Credential Definition</a></li><li><a href="#notes" class="table-of-contents__link toc-highlight">Notes</a></li></ul></li><li><a href="#issuing-a-credential" class="table-of-contents__link toc-highlight">Issuing a Credential</a><ul><li><a href="#faber---preparing-to-issue-a-credential" class="table-of-contents__link toc-highlight">Faber - Preparing to Issue a Credential</a></li><li><a href="#faber---issuing-the-credential" class="table-of-contents__link toc-highlight">Faber - Issuing the Credential</a></li><li><a href="#alice-receives-credential" class="table-of-contents__link toc-highlight">Alice Receives Credential</a></li><li><a href="#alice-stores-credential-in-her-wallet" class="table-of-contents__link toc-highlight">Alice Stores Credential in her Wallet</a></li><li><a href="#faber-receives-acknowledgment-that-the-credential-was-received" class="table-of-contents__link toc-highlight">Faber Receives Acknowledgment that the Credential was Received</a></li><li><a href="#issue-credential-notes" class="table-of-contents__link toc-highlight">Issue Credential Notes</a></li><li><a href="#bonus-points" class="table-of-contents__link toc-highlight">Bonus Points</a></li></ul></li><li><a href="#requestingpresenting-a-proof" class="table-of-contents__link toc-highlight">Requesting/Presenting a Proof</a><ul><li><a href="#faber-sends-a-proof-request" class="table-of-contents__link toc-highlight">Faber sends a Proof Request</a></li><li><a href="#alice---responding-to-the-proof-request" class="table-of-contents__link toc-highlight">Alice - Responding to the Proof Request</a></li><li><a href="#faber---verifying-the-proof" class="table-of-contents__link toc-highlight">Faber - Verifying the Proof</a></li><li><a href="#present-proof-notes" class="table-of-contents__link toc-highlight">Present Proof Notes</a></li><li><a href="#bonus-points-1" class="table-of-contents__link toc-highlight">Bonus Points</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/aries-acapy-docs/">ACA-Py</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/hyperledger/aries-acapy-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/aries-acapy-docs/assets/js/runtime~main.55efbebf.js"></script>
<script src="/aries-acapy-docs/assets/js/main.f211ac65.js"></script>
</body>
</html>