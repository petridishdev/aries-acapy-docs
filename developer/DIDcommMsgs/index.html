<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-developer/DIDcommMsgs">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Deeper Dive: DIDComm Messaging | Aries Cloud Agent Python (ACA-Py)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hyperledger.github.io/aries-acapy-docs/developer/DIDcommMsgs"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Deeper Dive: DIDComm Messaging | Aries Cloud Agent Python (ACA-Py)"><meta data-rh="true" name="description" content="DIDComm peer-to-peer messages are asynchronous messages that one agent sends to another - for example, Faber would send to Alice. In between, there may be other agents and message processing, but at the edges, Faber appears to be messaging directly with Alice using encryption based on the DIDs and DIDDocs that the two shared when establishing a connection. The messages are JSON-LD-friendly messages with a &quot;type&quot; that defines the namespace, protocol, protocol version and type of the message, an &quot;id&quot; that is GUID for the message, and additional fields as required by the message type. The namespace is currently defined to be a public DID that should be globally resolvable to a protocol specification. Currently, &quot;core&quot; messages use a DID that is not yet globally resolvable - Daniel Hardman has the keys associated with the DID."><meta data-rh="true" property="og:description" content="DIDComm peer-to-peer messages are asynchronous messages that one agent sends to another - for example, Faber would send to Alice. In between, there may be other agents and message processing, but at the edges, Faber appears to be messaging directly with Alice using encryption based on the DIDs and DIDDocs that the two shared when establishing a connection. The messages are JSON-LD-friendly messages with a &quot;type&quot; that defines the namespace, protocol, protocol version and type of the message, an &quot;id&quot; that is GUID for the message, and additional fields as required by the message type. The namespace is currently defined to be a public DID that should be globally resolvable to a protocol specification. Currently, &quot;core&quot; messages use a DID that is not yet globally resolvable - Daniel Hardman has the keys associated with the DID."><link data-rh="true" rel="icon" href="/aries-acapy-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hyperledger.github.io/aries-acapy-docs/developer/DIDcommMsgs"><link data-rh="true" rel="alternate" href="https://hyperledger.github.io/aries-acapy-docs/developer/DIDcommMsgs" hreflang="en"><link data-rh="true" rel="alternate" href="https://hyperledger.github.io/aries-acapy-docs/developer/DIDcommMsgs" hreflang="x-default"><link rel="stylesheet" href="/aries-acapy-docs/assets/css/styles.4ae0b40d.css">
<link rel="preload" href="/aries-acapy-docs/assets/js/runtime~main.f368ecf0.js" as="script">
<link rel="preload" href="/aries-acapy-docs/assets/js/main.0257e31f.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/aries-acapy-docs/"><div class="navbar__logo"><img src="/aries-acapy-docs/img/aries-logo.png" alt="ACA-Py" class="themedImage_ToTc themedImage--light_HNdA"><img src="/aries-acapy-docs/img/aries-logo.png" alt="ACA-Py" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Aries Cloud Agent Python</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/docs/">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/code/">Code</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/demo/">Demo</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hyperledger/aries-cloudagent-python" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aries-acapy-docs/admin/CHANGELOG">Admin</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/code/">Code</a><button aria-label="Toggle the collapsible sidebar category &#x27;Code&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/demo/">Aries Cloud Agent Python (ACA-Py) Demos</a><button aria-label="Toggle the collapsible sidebar category &#x27;Aries Cloud Agent Python (ACA-Py) Demos&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/aries-acapy-docs/developer/">Becoming an Indy/Aries Developer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Becoming an Indy/Aries Developer&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/AgentConnections">Establishing a connection between Aries Agents</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/AriesAgentArchitecture">Aries Cloud Agent Internals: Agent and Controller</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/AriesBasics">What is Aries?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/AriesBigPicture">Aries Agents in context: The Big Picture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/AriesDeveloperDemos">Developer Demos and Samples of Aries Agent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/AriesMessaging">An overview of Aries messaging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/AriesRoutingExample">Aries Routing - an example</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/ConnectIndyNetwork">Connecting to an Indy Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/CredentialRevocation">Credential Revocation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/aries-acapy-docs/developer/DIDcommMsgs">Deeper Dive: DIDComm Messaging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/DecentralizedIdentityDemos">Decentralized Identity Use Case Demos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/IndyAriesDevOptions">What should I work on? Options for Aries/Indy Developers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/IndyBasics">Indy, Verifiable Credentials and Decentralized Identity Basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/IssuingIndyCredentials">Issuing Indy Credentials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/PresentingIndyProofs">Presenting Indy Proofs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/RoutingEncryption">Deeper Dive: DIDComm Message Routing and Encryption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/developer/YourOwnAriesAgent">Starting Your Own Aries Agent</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/docs/">Hyperledger Aries Cloud Agent - Python</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hyperledger Aries Cloud Agent - Python&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/aries-acapy-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/aries-acapy-docs/developer/"><span itemprop="name">Becoming an Indy/Aries Developer</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Deeper Dive: DIDComm Messaging</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Deeper Dive: DIDComm Messaging</h1><p>DIDComm peer-to-peer messages are asynchronous messages that one agent sends to another - for example, Faber would send to Alice. In between, there may be other agents and message processing, but at the edges, Faber appears to be messaging directly with Alice using encryption based on the DIDs and DIDDocs that the two shared when establishing a connection. The messages are JSON-LD-friendly messages with a &quot;type&quot; that defines the namespace, protocol, protocol version and type of the message, an &quot;id&quot; that is GUID for the message, and additional fields as required by the message type. The namespace is currently defined to be a public DID that should be globally resolvable to a protocol specification. Currently, &quot;core&quot; messages use a DID that is not yet globally resolvable - Daniel Hardman has the keys associated with the DID.</p><p>Link: <a href="https://github.com/hyperledger/aries-rfcs/blob/master/concepts/0020-message-types/README.md" target="_blank" rel="noopener noreferrer">Message Types</a></p><p>As protocols are executed, the data associated with the protocol is stored in the (currently named) wallet of the agent. The data primarily consists of the state object for that instance of the protocol, and any artifacts of running the protocol. For example, when establishing a connection, the metadata associated with the connection (DIDs, DID Documents and private keys) is stored in the agent&#x27;s wallet. Likewise, ledger data is cached in the wallet (DIDs, schema, credential definitions, etc.) and credentials. This is taken care of by the Aries agent and the protocols configured into the agent.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="message-decorators">Message Decorators<a href="#message-decorators" class="hash-link" aria-label="Direct link to Message Decorators" title="Direct link to Message Decorators">​</a></h2><p>In addition to protocol specific data elements in messages, messages can include &quot;decorators&quot;, standardized message elements that define cross-cutting behavior. The most common example is the &quot;thread&quot; decorator, which is used to link the messages in a protocol instance. As messages go back and forth between agents to complete an instance of a protocol (e.g. issuing a credential), the <a href="https://github.com/hyperledger/aries-rfcs/tree/master/concepts/0008-message-id-and-threading" target="_blank" rel="noopener noreferrer">thread decorator</a> data elements let the agents know to which protocol instance the message belongs. Other currently defined examples of decorators include <a href="https://github.com/hyperledger/aries-rfcs/tree/master/concepts/0017-attachments" target="_blank" rel="noopener noreferrer">attachments</a>, <a href="https://github.com/hyperledger/aries-rfcs/blob/master/features/0043-l10n/README.md" target="_blank" rel="noopener noreferrer">localization</a>, <a href="https://github.com/hyperledger/aries-rfcs/blob/master/features/0034-message-tracing/README.md" target="_blank" rel="noopener noreferrer">tracing</a> and <a href="https://github.com/hyperledger/aries-rfcs/blob/master/features/0032-message-timing/README.md" target="_blank" rel="noopener noreferrer">timing</a>. Decorators are often processed by the core of the agent, but some are processed by the protocol message handlers. For example, the thread decorator processed to retrieve the protocol state object for that instance (thread) of the protocol before control is passed to the protocol message handler.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hyperledger/aries-acapy-docs/tree/main/docs/docusaurus/docs/developer/DIDcommMsgs.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/aries-acapy-docs/developer/CredentialRevocation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Credential Revocation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/aries-acapy-docs/developer/DecentralizedIdentityDemos"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Decentralized Identity Use Case Demos</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#message-decorators" class="table-of-contents__link toc-highlight">Message Decorators</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/aries-acapy-docs/">ACA-Py</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/hyperledger/aries-cloudagent-python" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/aries-acapy-docs/assets/js/runtime~main.f368ecf0.js"></script>
<script src="/aries-acapy-docs/assets/js/main.0257e31f.js"></script>
</body>
</html>