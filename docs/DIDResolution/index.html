<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-docs/DIDResolution">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">DID Resolution in ACA-Py | Aries Cloud Agent Python (ACA-Py)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hyperledger.github.io/aries-acapy-docs/docs/DIDResolution"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="DID Resolution in ACA-Py | Aries Cloud Agent Python (ACA-Py)"><meta data-rh="true" name="description" content="Decentralized Identifiers, or DIDs, are URIs that point to documents that describe cryptographic primitives and protocols used in decentralized identity management. DIDs include methods that describe where and how documents can be retrieved. DID resolution is the process of &quot;resolving&quot; a DID Document from a DID as dictated by the DID method."><meta data-rh="true" property="og:description" content="Decentralized Identifiers, or DIDs, are URIs that point to documents that describe cryptographic primitives and protocols used in decentralized identity management. DIDs include methods that describe where and how documents can be retrieved. DID resolution is the process of &quot;resolving&quot; a DID Document from a DID as dictated by the DID method."><link data-rh="true" rel="icon" href="/aries-acapy-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hyperledger.github.io/aries-acapy-docs/docs/DIDResolution"><link data-rh="true" rel="alternate" href="https://hyperledger.github.io/aries-acapy-docs/docs/DIDResolution" hreflang="en"><link data-rh="true" rel="alternate" href="https://hyperledger.github.io/aries-acapy-docs/docs/DIDResolution" hreflang="x-default"><link rel="stylesheet" href="/aries-acapy-docs/assets/css/styles.4ae0b40d.css">
<link rel="preload" href="/aries-acapy-docs/assets/js/runtime~main.55efbebf.js" as="script">
<link rel="preload" href="/aries-acapy-docs/assets/js/main.f211ac65.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/aries-acapy-docs/"><div class="navbar__logo"><img src="/aries-acapy-docs/img/aries-logo.png" alt="ACA-Py" class="themedImage_ToTc themedImage--light_HNdA"><img src="/aries-acapy-docs/img/aries-logo.png" alt="ACA-Py" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Aries Cloud Agent Python</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/docs/">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/code/">Code</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/demo/">Demo</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hyperledger/aries-acapy-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aries-acapy-docs/admin/CHANGELOG">Admin</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/code/">Code</a><button aria-label="Toggle the collapsible sidebar category &#x27;Code&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/demo/">Aries Cloud Agent Python (ACA-Py) Demos</a><button aria-label="Toggle the collapsible sidebar category &#x27;Aries Cloud Agent Python (ACA-Py) Demos&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/developer/">Becoming an Indy/Aries Developer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Becoming an Indy/Aries Developer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/aries-acapy-docs/docs/">Hyperledger Aries Cloud Agent - Python</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hyperledger Aries Cloud Agent - Python&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/AdminAPI">ACA-Py Administration API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/AnoncredsProofValidation">Anoncreds Proof Validation in Aca-Py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/ContainerImagesAndGithubActions">Container Images and Github Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/DIDMethods">DID methods in ACA-Py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/aries-acapy-docs/docs/DIDResolution">DID Resolution in ACA-Py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Databases">Databases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/DevReadMe">Developer&#x27;s Read Me for Hyperledger Aries Cloud Agent - Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Endorser">Transaction Endorser Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/JsonLdCredentials">JSON-LD Credentials in ACA-Py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Logging">Logging docs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Mediation">Mediation docs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Multicredentials">Multi-Credentials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Multiledger">Multi-ledger in ACA-Py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Multitenancy">Multi-tenancy in ACA-Py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/RedisPlugins">ACA-Py Redis Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/SupportedRFCs">Aries AIP and RFCs Supported in Aries Cloud Agent Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Troubleshooting">Troubleshooting Aries Cloud Agent Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/UsingOpenAPI">Aries Cloud Agent-Python (ACA-Py) - OpenAPI Code Generation Considerations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/deploymentModel">Aries Cloud Agent-Python (ACA-Py) - Deployment Model</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/aries-acapy-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/aries-acapy-docs/docs/"><span itemprop="name">Hyperledger Aries Cloud Agent - Python</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">DID Resolution in ACA-Py</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>DID Resolution in ACA-Py</h1><p>Decentralized Identifiers, or DIDs, are URIs that point to documents that describe cryptographic primitives and protocols used in decentralized identity management. DIDs include methods that describe where and how documents can be retrieved. DID resolution is the process of &quot;resolving&quot; a DID Document from a DID as dictated by the DID method.</p><p>A DID Resolver is a piece of software that implements the methods for resolving a document from a DID.</p><p>For example, given the DID <code>did:example:1234abcd</code>, a DID Resolver that supports <code>did:example</code> might return:</p><div class="language-json= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;@context&quot;: &quot;https://www.w3.org/ns/did/v1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: &quot;did:example:1234abcd&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;verificationMethod&quot;: [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;id&quot;: &quot;did:example:1234abcd#keys-1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type&quot;: &quot;Ed25519VerificationKey2018&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;controller&quot;: &quot;did:example:1234abcd&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;publicKeyBase58&quot;: &quot;H3C2AVvLMv6gmMNam3uVAjZpfkcJCwDwnZn6z3wXmqPV&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;service&quot;: [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;id&quot;: &quot;did:example:1234abcd#did-communication&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type&quot;: &quot;did-communication&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;serviceEndpoint&quot;: &quot;https://agent.example.com/8377464&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more details on DIDs and DID Resolution, see the <a href="https://www.w3.org/TR/did-core/" target="_blank" rel="noopener noreferrer">W3C DID Specification</a>.</p><p>In practice, DIDs and DID Documents are used for a variety of purposes but especially to help establish connections between Agents and verify credentials.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="didresolver"><code>DIDResolver</code><a href="#didresolver" class="hash-link" aria-label="Direct link to didresolver" title="Direct link to didresolver">​</a></h2><p>In ACA-Py, the <code>DIDResolver</code> provides the interface to resolve DIDs using registered method resolvers. Method resolver registration happens on startup in a <code>did_resolvers</code> list. This registry enables additional resolvers to be loaded via plugin.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-usage">Example usage:<a href="#example-usage" class="hash-link" aria-label="Direct link to Example usage:" title="Direct link to Example usage:">​</a></h4><div class="language-python= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class ExampleMessageHandler:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async def handle(context: RequestContext, responder: BaseResponder):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;Handle example message.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resolver = await context.inject(DIDResolver)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    doc: dict = await resolver.resolve(&quot;did:example:123&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert doc[&quot;id&quot;] == &quot;did:example:123&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verification_method = await resolver.dereference(&quot;did:example:123#keys-1&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="method-resolver-selection">Method Resolver Selection<a href="#method-resolver-selection" class="hash-link" aria-label="Direct link to Method Resolver Selection" title="Direct link to Method Resolver Selection">​</a></h2><p>On <code>DIDResolver.resolve</code> or <code>DIDResolver.dereference</code>, the resolver interface will select the most appropriate method resolver to handle the given DID. In this selection process, method resolvers are distinguished from each other by:</p><ul><li>Type. The resolver&#x27;s type falls into one of two categories: native or non-native. A &quot;native&quot; resolver will perform all resolution steps directly. A &quot;non-native&quot; resolver delegates all or part of resolution to another service or entity.</li><li>Self-reported supported DIDs. Each method resolver implements a <code>supports</code> method or a <code>supported_did_regex</code> method. These methods are used to determine whether the given DID can be handled by the method resolver.</li></ul><p>The selection algorithm roughly follows the following steps:</p><ol><li>Filter out all resolvers where <code>resolver.supports(did)</code> returns <code>false</code>.</li><li>Partition remaining resolvers by type with all native resolvers followed by non-native resolvers (registration order preserved within partitions).</li><li>For each resolver in the resulting list, attempt to resolve the DID and return the first successful result.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resolver-plugins">Resolver Plugins<a href="#resolver-plugins" class="hash-link" aria-label="Direct link to Resolver Plugins" title="Direct link to Resolver Plugins">​</a></h2><p>Extending ACA-Py with additional Method Resolvers should be relatively simple. Supposing that you want to resolve DIDs for the <code>did:cool</code> method, this should be as simple as installing a method resolver into your python environment and loading the resolver on startup. If no method resolver exists yet for <code>did:cool</code>, writing your own should require minimal overhead.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="writing-a-resolver-plugin">Writing a resolver plugin<a href="#writing-a-resolver-plugin" class="hash-link" aria-label="Direct link to Writing a resolver plugin" title="Direct link to Writing a resolver plugin">​</a></h3><p>Method resolver plugins are composed of two primary pieces: plugin injection and resolution logic. The resolution logic dictates how a DID becomes a DID Document, following the given DID Method Specification. This logic is implemented using the <code>BaseDIDResolver</code> class as the base. <code>BaseDIDResolver</code> is an abstract base class that defines the interface that the core <code>DIDResolver</code> expects for Method resolvers.</p><p>The following is an example method resolver implementation. In this example, we have 2 files, one for each piece (injection and resolution). The <code>__init__.py</code> will be in charge of injecting the plugin, and <code>example_resolver.py</code> will have the logic implementation to resolve for a fabricated <code>did:example</code> method.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="__init-__py"><code>__init __.py</code><a href="#__init-__py" class="hash-link" aria-label="Direct link to __init-__py" title="Direct link to __init-__py">​</a></h4><div class="language-python= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">from aries_cloudagent.config.injection_context import InjectionContext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from ..resolver.did_resolver import DIDResolver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from .example_resolver import ExampleResolver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async def setup(context: InjectionContext):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;Setup the plugin.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    registry = context.inject(DIDResolver)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resolver = ExampleResolver()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    await resolver.setup(context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    registry.append(resolver)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="example_resolverpy"><code>example_resolver.py</code><a href="#example_resolverpy" class="hash-link" aria-label="Direct link to example_resolverpy" title="Direct link to example_resolverpy">​</a></h4><div class="language-python= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import re</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from typing import Pattern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from aries_cloudagent.resolver.base import BaseDIDResolver, ResolverType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ExampleResolver(BaseDIDResolver):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;ExampleResolver class.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super().__init__(ResolverType.NATIVE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Alternatively, ResolverType.NON_NATIVE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self._supported_did_regex = re.compile(&quot;^did:example:.*$&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @property</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def supported_did_regex(self) -&gt; Pattern:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Return compiled regex matching supported DIDs.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return self._supported_did_regex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async def setup(self, context):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Setup the example resolver (none required).&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async def _resolve(self, profile: Profile, did: str) -&gt; dict:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Resolve example DIDs.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if did != &quot;did:example:1234abcd&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            raise DIDNotFound(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;We only actually resolve did:example:1234abcd. Sorry!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;@context&quot;: &quot;https://www.w3.org/ns/did/v1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;id&quot;: &quot;did:example:1234abcd&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;verificationMethod&quot;: [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;id&quot;: &quot;did:example:1234abcd#keys-1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;type&quot;: &quot;Ed25519VerificationKey2018&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;controller&quot;: &quot;did:example:1234abcd&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;publicKeyBase58&quot;: &quot;H3C2AVvLMv6gmMNam3uVAjZpfkcJCwDwnZn6z3wXmqPV&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;service&quot;: [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;id&quot;: &quot;did:example:1234abcd#did-communication&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;type&quot;: &quot;did-communication&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;serviceEndpoint&quot;: &quot;https://agent.example.com/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="errors">Errors<a href="#errors" class="hash-link" aria-label="Direct link to Errors" title="Direct link to Errors">​</a></h4><p>There are 3 different errors associated with resolution in ACA-Py that could be used for development purposes.</p><ul><li>ResolverError<ul><li>Base class for resolver exceptions.</li></ul></li><li>DIDNotFound<ul><li>Raised when DID is not found using DID method specific algorithm.</li></ul></li><li>DIDMethodNotSupported<ul><li>Raised when no resolver is registered for a given did method.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-resolver-plugins">Using Resolver Plugins<a href="#using-resolver-plugins" class="hash-link" aria-label="Direct link to Using Resolver Plugins" title="Direct link to Using Resolver Plugins">​</a></h3><p>In this section, the <a href="https://github.com/dbluhm/acapy-resolver-github" target="_blank" rel="noopener noreferrer">Github Resolver Plugin found here</a> will be used as an an example plugin to work with. This resolver resolves <code>did:github</code> DIDs. </p><p>The resolution algorithm is simple: for the github DID <code>did:github:dbluhm</code>, the method specific identifier <code>dbluhm</code> (a GitHub username) is used to lookup a <code>index.jsonld</code> file in the <code>ghdid</code> repository in that GitHub users profile. See <a href="http://docs.github-did.com/did-method-spec/" target="_blank" rel="noopener noreferrer">GitHub DID Method Specification</a> for more details.</p><p>To use this plugin, first install it into your project&#x27;s python environment:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ pip </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> git+https://github.com/dbluhm/acapy-resolver-github</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then, invoke ACA-Py as you normally do with the addition of:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ aca-py start </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --plugin acapy_resolver_github </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ... the remainder of your startup arguments</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or add the following to your configuration file:</p><div class="language-yaml= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">plugin:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - acapy_resolver_github</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The following is a fully functional Dockerfile encapsulating this setup:</p><div class="language-dockerfile= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># TODO replace the following two lines with ACA-Py 0.7.0 when released</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM bcgovimages/von-image:py36-1.16-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pip3 install git+https://github.com/hyperledger/aries-cloudagent-python@2ff1ddba897d26a7deb761924018145162cc867c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pip3 install git+https://github.com/dbluhm/acapy-resolver-github</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;aca-py&quot;, &quot;start&quot;, &quot;-it&quot;, &quot;http&quot;, &quot;0.0.0.0&quot;, &quot;3000&quot;, &quot;-ot&quot;, &quot;http&quot;, &quot;-e&quot;, &quot;http://localhost:3000&quot;, &quot;--admin&quot;, &quot;0.0.0.0&quot;, &quot;3001&quot;, &quot;--admin-insecure-mode&quot;, &quot;--no-ledger&quot;, &quot;--plugin&quot;, &quot;acapy_resolver_github&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To use the above dockerfile:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build -t resolver-example </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run --rm -it -p </span><span class="token number" style="color:#36acaa">3000</span><span class="token plain">:3000 -p </span><span class="token number" style="color:#36acaa">3001</span><span class="token plain">:3001 resolver-example</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="directory-of-resolver-plugins">Directory of Resolver Plugins<a href="#directory-of-resolver-plugins" class="hash-link" aria-label="Direct link to Directory of Resolver Plugins" title="Direct link to Directory of Resolver Plugins">​</a></h3><ul><li><a href="https://github.com/dbluhm/acapy-resolver-github" target="_blank" rel="noopener noreferrer">Github Resolver</a></li><li><a href="https://github.com/sicpa-dlab/acapy-resolver-universal" target="_blank" rel="noopener noreferrer">Universal Resolver</a></li><li><a href="https://github.com/sicpa-dlab/acapy-resolver-didcomm" target="_blank" rel="noopener noreferrer">DIDComm Resolver</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://www.w3.org/TR/did-core/" target="_blank" rel="noopener noreferrer">https://www.w3.org/TR/did-core/</a>
<a href="https://w3c-ccg.github.io/did-resolution/" target="_blank" rel="noopener noreferrer">https://w3c-ccg.github.io/did-resolution/</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hyperledger/aries-acapy-docs/tree/main/docs/docusaurus/docs/docs/DIDResolution.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/aries-acapy-docs/docs/DIDMethods"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">DID methods in ACA-Py</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/aries-acapy-docs/docs/Databases"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Databases</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#didresolver" class="table-of-contents__link toc-highlight"><code>DIDResolver</code></a></li><li><a href="#method-resolver-selection" class="table-of-contents__link toc-highlight">Method Resolver Selection</a></li><li><a href="#resolver-plugins" class="table-of-contents__link toc-highlight">Resolver Plugins</a><ul><li><a href="#writing-a-resolver-plugin" class="table-of-contents__link toc-highlight">Writing a resolver plugin</a></li><li><a href="#using-resolver-plugins" class="table-of-contents__link toc-highlight">Using Resolver Plugins</a></li><li><a href="#directory-of-resolver-plugins" class="table-of-contents__link toc-highlight">Directory of Resolver Plugins</a></li></ul></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/aries-acapy-docs/">ACA-Py</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/hyperledger/aries-acapy-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/aries-acapy-docs/assets/js/runtime~main.55efbebf.js"></script>
<script src="/aries-acapy-docs/assets/js/main.f211ac65.js"></script>
</body>
</html>