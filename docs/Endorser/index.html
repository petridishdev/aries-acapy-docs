<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-docs/Endorser">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Transaction Endorser Support | Aries Cloud Agent Python (ACA-Py)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hyperledger.github.io/aries-acapy-docs/docs/Endorser"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Transaction Endorser Support | Aries Cloud Agent Python (ACA-Py)"><meta data-rh="true" name="description" content="ACA-Py supports an Endorser Protocol, that allows an un-privileged agent (an &quot;Author&quot;) to request another agent (the &quot;Endorser&quot;) to sign their transactions so they can write these transactions to the ledger. This is required on Indy ledgers, where new agents will typically be granted only &quot;Author&quot; privileges."><meta data-rh="true" property="og:description" content="ACA-Py supports an Endorser Protocol, that allows an un-privileged agent (an &quot;Author&quot;) to request another agent (the &quot;Endorser&quot;) to sign their transactions so they can write these transactions to the ledger. This is required on Indy ledgers, where new agents will typically be granted only &quot;Author&quot; privileges."><link data-rh="true" rel="icon" href="/aries-acapy-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hyperledger.github.io/aries-acapy-docs/docs/Endorser"><link data-rh="true" rel="alternate" href="https://hyperledger.github.io/aries-acapy-docs/docs/Endorser" hreflang="en"><link data-rh="true" rel="alternate" href="https://hyperledger.github.io/aries-acapy-docs/docs/Endorser" hreflang="x-default"><link rel="stylesheet" href="/aries-acapy-docs/assets/css/styles.4ae0b40d.css">
<link rel="preload" href="/aries-acapy-docs/assets/js/runtime~main.55efbebf.js" as="script">
<link rel="preload" href="/aries-acapy-docs/assets/js/main.f211ac65.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/aries-acapy-docs/"><div class="navbar__logo"><img src="/aries-acapy-docs/img/aries-logo.png" alt="ACA-Py" class="themedImage_ToTc themedImage--light_HNdA"><img src="/aries-acapy-docs/img/aries-logo.png" alt="ACA-Py" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Aries Cloud Agent Python</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/docs/">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/code/">Code</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aries-acapy-docs/demo/">Demo</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hyperledger/aries-acapy-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aries-acapy-docs/admin/CHANGELOG">Admin</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/code/">Code</a><button aria-label="Toggle the collapsible sidebar category &#x27;Code&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/demo/">Aries Cloud Agent Python (ACA-Py) Demos</a><button aria-label="Toggle the collapsible sidebar category &#x27;Aries Cloud Agent Python (ACA-Py) Demos&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aries-acapy-docs/developer/">Becoming an Indy/Aries Developer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Becoming an Indy/Aries Developer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/aries-acapy-docs/docs/">Hyperledger Aries Cloud Agent - Python</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hyperledger Aries Cloud Agent - Python&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/AdminAPI">ACA-Py Administration API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/AnoncredsProofValidation">Anoncreds Proof Validation in Aca-Py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/ContainerImagesAndGithubActions">Container Images and Github Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/DIDMethods">DID methods in ACA-Py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/DIDResolution">DID Resolution in ACA-Py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Databases">Databases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/DevReadMe">Developer&#x27;s Read Me for Hyperledger Aries Cloud Agent - Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/aries-acapy-docs/docs/Endorser">Transaction Endorser Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/JsonLdCredentials">JSON-LD Credentials in ACA-Py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Logging">Logging docs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Mediation">Mediation docs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Multicredentials">Multi-Credentials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Multiledger">Multi-ledger in ACA-Py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Multitenancy">Multi-tenancy in ACA-Py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/RedisPlugins">ACA-Py Redis Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/SupportedRFCs">Aries AIP and RFCs Supported in Aries Cloud Agent Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/Troubleshooting">Troubleshooting Aries Cloud Agent Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/UsingOpenAPI">Aries Cloud Agent-Python (ACA-Py) - OpenAPI Code Generation Considerations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aries-acapy-docs/docs/deploymentModel">Aries Cloud Agent-Python (ACA-Py) - Deployment Model</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/aries-acapy-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/aries-acapy-docs/docs/"><span itemprop="name">Hyperledger Aries Cloud Agent - Python</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Transaction Endorser Support</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Transaction Endorser Support</h1><p>ACA-Py supports an <a href="https://github.com/hyperledger/aries-rfcs/pull/586" target="_blank" rel="noopener noreferrer">Endorser Protocol</a>, that allows an un-privileged agent (an &quot;Author&quot;) to request another agent (the &quot;Endorser&quot;) to sign their transactions so they can write these transactions to the ledger. This is required on Indy ledgers, where new agents will typically be granted only &quot;Author&quot; privileges.</p><p>Transaction Endorsement is built into the protocols for Schema, Credential Definition and Revocation, and endorsements can be explicitely requested, or ACA-Py can be configured to automate the endorsement workflow.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-connections-between-authors-and-endorsers">Setting up Connections between Authors and Endorsers<a href="#setting-up-connections-between-authors-and-endorsers" class="hash-link" aria-label="Direct link to Setting up Connections between Authors and Endorsers" title="Direct link to Setting up Connections between Authors and Endorsers">​</a></h2><p>Since endorsement involves message exchange between two agents, these agents must establish and configure a connection before any endorsements can be provided or requested.</p><p>Once the connection is established and <code>active</code>, the &quot;role&quot; (either Author or Endorser) is attached to the connection using the <code>/transactions/{conn_id}/set-endorser-role</code> endpoint. For Authors, they must additionally configure the DID of the Endorser as this is required when the Author signs the transaction (prior to sending to the Endorser for endorsement) - this is done using the <code>/transactions/{conn_id}/set-endorser-info</code> endpoint.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="requesting-transaction-endorsement">Requesting Transaction Endorsement<a href="#requesting-transaction-endorsement" class="hash-link" aria-label="Direct link to Requesting Transaction Endorsement" title="Direct link to Requesting Transaction Endorsement">​</a></h2><p>Transaction Endorsement is built into the protocols for Schema, Credential Definition and Revocation. When executing one of the endpoints that will trigger a ledger write, an endorsement protocol can be explicitely requested by specifying the <code>connection_id</code> (of the Endorser connection) and <code>create_transaction_for_endorser</code>.</p><p>(Note that endorsement requests can be automated, see the secion on &quot;Configuring ACA-Py&quot; below.)</p><p>If transaction endorsement is requested, then ACA-Py will create a transaction record (this will be returned by the endpoint, rather than the Schema, Cred Def, etc) and the following endpoints must be invoked:</p><table><thead><tr><th>Protocol Step</th><th>Author</th><th>Endorser</th></tr></thead><tbody><tr><td>Request Endorsement</td><td><code>/transactions/create-request</code></td><td></td></tr><tr><td>Endorse Transaction</td><td></td><td><code>/transactions/{tran_id}/endorse</code></td></tr><tr><td>Write Transaction</td><td><code>/transactions/{tran_id}/write</code></td><td></td></tr></tbody></table><p>Additional endpoints allow the Endorser to reject the endorsement request, or for the Author to re-submit or cancel a request.</p><p>Web hooks will be triggered to notify each ACA-Py agent of any transaction request, endorsements, etc to allow the controller to react to the event, or the process can be automated via command-line parameters (see below).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-aca-py-for-auto-or-manual-endorsement">Configuring ACA-Py for Auto or Manual Endorsement<a href="#configuring-aca-py-for-auto-or-manual-endorsement" class="hash-link" aria-label="Direct link to Configuring ACA-Py for Auto or Manual Endorsement" title="Direct link to Configuring ACA-Py for Auto or Manual Endorsement">​</a></h2><p>The following start-up parameters are supported by ACA-Py:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Endorsement:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --endorser-protocol-role &lt;endorser-role&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Specify the role (&#x27;author&#x27; or &#x27;endorser&#x27;) which this agent will participate. Authors will request transaction endorement from an Endorser. Endorsers will endorse transactions from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Authors, and may write their own transactions to the ledger. If no role (or &#x27;none&#x27;) is specified then the endorsement protocol will not be used and this agent will write transactions to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        the ledger directly. [env var: ACAPY_ENDORSER_ROLE]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --endorser-public-did &lt;endorser-public-did&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        For transaction Authors, specify the the public DID of the Endorser agent who will be endorsing transactions. Note this requires that the connection be made using the Endorser&#x27;s public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        DID. [env var: ACAPY_ENDORSER_PUBLIC_DID]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --endorser-alias &lt;endorser-alias&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        For transaction Authors, specify the the alias of the Endorser connection that will be used to endorse transactions. [env var: ACAPY_ENDORSER_ALIAS]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --auto-request-endorsement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        For Authors, specify whether to automatically request endorsement for all transactions. (If not specified, the controller must invoke the request endorse operation for each</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        transaction.) [env var: ACAPY_AUTO_REQUEST_ENDORSEMENT]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --auto-endorse-transactions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        For Endorsers, specify whether to automatically endorse any received endorsement requests. (If not specified, the controller must invoke the endorsement operation for each transaction.)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        [env var: ACAPY_AUTO_ENDORSE_TRANSACTIONS]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --auto-write-transactions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        For Authors, specify whether to automatically write any endorsed transactions. (If not specified, the controller must invoke the write transaction operation for each transaction.) [env</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        var: ACAPY_AUTO_WRITE_TRANSACTIONS]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --auto-create-revocation-transactions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        For Authors, specify whether to automatically create transactions for a cred def&#x27;s revocation registry. (If not specified, the controller must invoke the endpoints required to create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        the revocation registry and assign to the cred def.) [env var: ACAPY_CREATE_REVOCATION_TRANSACTIONS]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --auto-promote-author-did</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        For Authors, specify whether to automatically promote a DID to the wallet public DID after writing to the ledger. [env var: ACAPY_AUTO_PROMOTE_AUTHOR_DID]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-aca-py-handles-endorsements">How Aca-py Handles Endorsements<a href="#how-aca-py-handles-endorsements" class="hash-link" aria-label="Direct link to How Aca-py Handles Endorsements" title="Direct link to How Aca-py Handles Endorsements">​</a></h2><p>Internally, the Endorsement functionality is implemented as a protocol, and is implemented consistently with other protocols:</p><ul><li>a <a href="https://github.com/hyperledger/aries-cloudagent-python/blob/main/aries_cloudagent/protocols/endorse_transaction/v1_0/routes.py" target="_blank" rel="noopener noreferrer">routes.py</a> file exposes the admin endpoints</li><li><a href="https://github.com/hyperledger/aries-cloudagent-python/tree/main/aries_cloudagent/protocols/endorse_transaction/v1_0/handlers" target="_blank" rel="noopener noreferrer">handler files</a> implement responses to any received Endorse protocol messages</li><li>a <a href="https://github.com/hyperledger/aries-cloudagent-python/blob/main/aries_cloudagent/protocols/endorse_transaction/v1_0/manager.py" target="_blank" rel="noopener noreferrer">manager.py</a> file implements common functionality that is called from both the routes.py and handler classes (as well as from other classes that need to interact with Endorser functionality)</li></ul><p>The Endorser makes use of the <a href="https://github.com/hyperledger/aries-cloudagent-python/blob/main/CHANGELOG.md#july-14-2021" target="_blank" rel="noopener noreferrer">Event Bus</a> (links to the PR which links to a hackmd doc) to notify other protocols of any Endorser events of interest. For example, after a Credential Definition endorsement is received, the TransactionManager writes the endorsed transaction to the ledger and uses the Event Bus to notify the Credential Defintition manager that it can do any required post-processing (such as writing the cred def record to the wallet, initiating the revocation registry, etc.).</p><p>The overall architecture can be illustrated as:</p><p><img loading="lazy" alt="Class Diagram" src="/aries-acapy-docs/assets/images/endorser-design-869160f6fe4b2c3f79bb897179566aab.png" width="364" height="524" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-credential-definition-and-revocation-registry">Create Credential Definition and Revocation Registry<a href="#create-credential-definition-and-revocation-registry" class="hash-link" aria-label="Direct link to Create Credential Definition and Revocation Registry" title="Direct link to Create Credential Definition and Revocation Registry">​</a></h3><p>An example of an Endorser flow is as follows, showing how a credential definition endorsement is received and processed, and optionally kicks off the revocation registry process:</p><p><img loading="lazy" alt="Sequence Diagram" src="/aries-acapy-docs/assets/images/endorse-cred-def-3ca5eac841bac481ce58f191543fa802.png" width="1586" height="1759" class="img_ev3q"></p><p>You can see that there is a standard endorser flow happening each time there is a ledger write (illustrated in the &quot;Endorser&quot; process).</p><p>At the end of each endorse sequence, the TransactionManager sends a notification via the EventBus so that any dependant processing can continue. Each Router is responsible for listening and responding to these notifications if necessary.</p><p>For example:</p><ul><li>Once the credential definition is created, a revocation registry must be created (for revocable cred defs)</li><li>Once the revocation registry is created, a revocation entry must be created</li><li>Potentially, the cred def status could be updated once the revocation entry is completed</li></ul><p>Using the EventBus decouples the event sequence. Any functions triggered by an event notification are typically also available directly via Admin endpoints.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-did-and-promote-to-public">Create DID and Promote to Public<a href="#create-did-and-promote-to-public" class="hash-link" aria-label="Direct link to Create DID and Promote to Public" title="Direct link to Create DID and Promote to Public">​</a></h3><p>... and an example of creating a DID and promoting it to public (and creating an ATTRIB for the endpoint:</p><p><img loading="lazy" alt="Sequence Diagram" src="/aries-acapy-docs/assets/images/endorse-public-did-75876841b688a7b3712b7eaa826bc097.png" width="1529" height="1193" class="img_ev3q"></p><p>You can see the same endorsement processes in this sequence.</p><p>Once the DID is written, the DID can (optionally) be promoted to the public DID, which will also invoke an ATTRIB transaction to write the endpoint.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hyperledger/aries-acapy-docs/tree/main/docs/docusaurus/docs/docs/Endorser.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/aries-acapy-docs/docs/DevReadMe"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Developer&#x27;s Read Me for Hyperledger Aries Cloud Agent - Python</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/aries-acapy-docs/docs/JsonLdCredentials"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">JSON-LD Credentials in ACA-Py</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setting-up-connections-between-authors-and-endorsers" class="table-of-contents__link toc-highlight">Setting up Connections between Authors and Endorsers</a></li><li><a href="#requesting-transaction-endorsement" class="table-of-contents__link toc-highlight">Requesting Transaction Endorsement</a></li><li><a href="#configuring-aca-py-for-auto-or-manual-endorsement" class="table-of-contents__link toc-highlight">Configuring ACA-Py for Auto or Manual Endorsement</a></li><li><a href="#how-aca-py-handles-endorsements" class="table-of-contents__link toc-highlight">How Aca-py Handles Endorsements</a><ul><li><a href="#create-credential-definition-and-revocation-registry" class="table-of-contents__link toc-highlight">Create Credential Definition and Revocation Registry</a></li><li><a href="#create-did-and-promote-to-public" class="table-of-contents__link toc-highlight">Create DID and Promote to Public</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/aries-acapy-docs/">ACA-Py</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/hyperledger/aries-acapy-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/aries-acapy-docs/assets/js/runtime~main.55efbebf.js"></script>
<script src="/aries-acapy-docs/assets/js/main.f211ac65.js"></script>
</body>
</html>